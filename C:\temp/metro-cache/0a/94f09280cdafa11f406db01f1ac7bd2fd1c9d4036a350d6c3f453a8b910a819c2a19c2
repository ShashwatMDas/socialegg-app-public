{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/interopRequireWildcard","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"@unimodules/core","data":{"isAsync":false}},{"name":"blueimp-md5","data":{"isAsync":false}},{"name":"expo-constants","data":{"isAsync":false}},{"name":"expo-file-system","data":{"isAsync":false}},{"name":"./AssetUris","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  var _interopRequireWildcard = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireWildcard\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getLocalAssets = getLocalAssets;\n  exports.getManifest = getManifest;\n  exports.downloadAsync = downloadAsync;\n  exports.manifestBaseUrl = exports.IS_BARE_ENV_WITHOUT_UPDATES = exports.IS_ENV_WITH_UPDATES_ENABLED = exports.IS_BARE_ENV_WITH_UPDATES = exports.IS_MANAGED_ENV = void 0;\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/regenerator\"));\n\n  var _core = _$$_REQUIRE(_dependencyMap[3], \"@unimodules/core\");\n\n  var _blueimpMd = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"blueimp-md5\"));\n\n  var _expoConstants = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"expo-constants\"));\n\n  var FileSystem = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[6], \"expo-file-system\"));\n\n  var _AssetUris = _$$_REQUIRE(_dependencyMap[7], \"./AssetUris\");\n\n  var _NativeModulesProxy$E;\n\n  var IS_MANAGED_ENV = !!_expoConstants.default.appOwnership;\n  exports.IS_MANAGED_ENV = IS_MANAGED_ENV;\n  var IS_BARE_ENV_WITH_UPDATES = !IS_MANAGED_ENV && !!((_NativeModulesProxy$E = _core.NativeModulesProxy.ExpoUpdates) == null ? void 0 : _NativeModulesProxy$E.isEnabled);\n  exports.IS_BARE_ENV_WITH_UPDATES = IS_BARE_ENV_WITH_UPDATES;\n  var IS_ENV_WITH_UPDATES_ENABLED = IS_MANAGED_ENV || IS_BARE_ENV_WITH_UPDATES;\n  exports.IS_ENV_WITH_UPDATES_ENABLED = IS_ENV_WITH_UPDATES_ENABLED;\n  var IS_BARE_ENV_WITHOUT_UPDATES = !IS_MANAGED_ENV && !IS_BARE_ENV_WITH_UPDATES;\n  exports.IS_BARE_ENV_WITHOUT_UPDATES = IS_BARE_ENV_WITHOUT_UPDATES;\n\n  function getLocalAssets() {\n    var _NativeModulesProxy$E2, _NativeModulesProxy$E3;\n\n    return (_NativeModulesProxy$E2 = (_NativeModulesProxy$E3 = _core.NativeModulesProxy.ExpoUpdates) == null ? void 0 : _NativeModulesProxy$E3.localAssets) != null ? _NativeModulesProxy$E2 : {};\n  }\n\n  function getManifest() {\n    var _Constants$manifest;\n\n    return (_Constants$manifest = _expoConstants.default.manifest) != null ? _Constants$manifest : {};\n  }\n\n  var manifestBaseUrl = _expoConstants.default.experienceUrl ? (0, _AssetUris.getManifestBaseUrl)(_expoConstants.default.experienceUrl) : null;\n  exports.manifestBaseUrl = manifestBaseUrl;\n\n  function downloadAsync(uri, hash, type, name) {\n    return _regenerator.default.async(function downloadAsync$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!IS_MANAGED_ENV) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", _downloadAsyncManagedEnv(uri, hash, type, name));\n\n          case 2:\n            return _context.abrupt(\"return\", _downloadAsyncUnmanagedEnv(uri, hash, type));\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function _downloadAsyncManagedEnv(uri, hash, type, name) {\n    var cacheFileId, localUri, _await$FileSystem$get, exists, md5, _await$FileSystem$dow;\n\n    return _regenerator.default.async(function _downloadAsyncManagedEnv$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            cacheFileId = hash || (0, _blueimpMd.default)(uri);\n            localUri = FileSystem.cacheDirectory + \"ExponentAsset-\" + cacheFileId + \".\" + type;\n            _context2.next = 4;\n            return _regenerator.default.awrap(FileSystem.getInfoAsync(localUri, {\n              md5: true\n            }));\n\n          case 4:\n            _await$FileSystem$get = _context2.sent;\n            exists = _await$FileSystem$get.exists;\n            md5 = _await$FileSystem$get.md5;\n\n            if (!(!exists || hash !== null && md5 !== hash)) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 10;\n            return _regenerator.default.awrap(FileSystem.downloadAsync(uri, localUri, {\n              md5: true\n            }));\n\n          case 10:\n            _await$FileSystem$dow = _context2.sent;\n            md5 = _await$FileSystem$dow.md5;\n\n            if (!(hash !== null && md5 !== hash)) {\n              _context2.next = 14;\n              break;\n            }\n\n            throw new Error(\"Downloaded file for asset '\" + name + \".\" + type + \"' \" + (\"Located at \" + uri + \" \") + \"failed MD5 integrity check\");\n\n          case 14:\n            return _context2.abrupt(\"return\", localUri);\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function _downloadAsyncUnmanagedEnv(uri, hash, type) {\n    var cacheFileId, localUri;\n    return _regenerator.default.async(function _downloadAsyncUnmanagedEnv$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!uri.startsWith('file://')) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", uri);\n\n          case 2:\n            cacheFileId = hash || (0, _blueimpMd.default)(uri);\n            localUri = FileSystem.cacheDirectory + \"ExponentAsset-\" + cacheFileId + \".\" + type;\n            _context3.next = 6;\n            return _regenerator.default.awrap(FileSystem.downloadAsync(uri, localUri));\n\n          case 6:\n            return _context3.abrupt(\"return\", localUri);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n});","lineCount":155,"map":[[16,0,1,0],[18,0,2,0],[20,0,3,0],[22,0,4,0],[24,0,5,0],[28,0,7,7],[28,6,7,13,"IS_MANAGED_ENV"],[28,20,7,27],[28,23,7,30],[28,24,7,31],[28,25,7,32,"Constants"],[28,48,7,42,"appOwnership"],[28,60,7,7],[30,0,11,7],[30,6,11,13,"IS_BARE_ENV_WITH_UPDATES"],[30,30,11,37],[30,33,11,40],[30,34,11,41,"IS_MANAGED_ENV"],[30,48,11,40],[30,52,11,59],[30,53,11,60],[30,80,11,61,"NativeModulesProxy"],[30,105,11,80,"ExpoUpdates"],[30,116,11,60],[30,137,11,61],[30,159,11,93,"isEnabled"],[30,168,11,60],[30,169,11,7],[32,0,12,7],[32,6,12,13,"IS_ENV_WITH_UPDATES_ENABLED"],[32,33,12,40],[32,36,12,43,"IS_MANAGED_ENV"],[32,50,12,57],[32,54,12,61,"IS_BARE_ENV_WITH_UPDATES"],[32,78,12,7],[34,0,14,7],[34,6,14,13,"IS_BARE_ENV_WITHOUT_UPDATES"],[34,33,14,40],[34,36,14,43],[34,37,14,44,"IS_MANAGED_ENV"],[34,51,14,43],[34,55,14,62],[34,56,14,63,"IS_BARE_ENV_WITH_UPDATES"],[34,80,14,7],[37,0,17,7],[37,11,17,16,"getLocalAssets"],[37,25,17,7],[37,28,17,33],[38,0,17,33],[40,0,18,4],[40,63,18,11,"NativeModulesProxy"],[40,88,18,30,"ExpoUpdates"],[40,99,18,4],[40,120,18,11],[40,143,18,43,"localAssets"],[40,154,18,4],[40,191,18,58],[40,193,18,4],[41,0,19,1],[43,0,20,7],[43,11,20,16,"getManifest"],[43,22,20,7],[43,25,20,30],[44,0,20,30],[46,0,21,4],[46,34,21,11,"Constants"],[46,57,21,21,"manifest"],[46,65,21,4],[46,99,21,33],[46,101,21,4],[47,0,22,1],[49,0,24,7],[49,6,24,13,"manifestBaseUrl"],[49,21,24,28],[49,24,24,31,"Constants"],[49,47,24,41,"experienceUrl"],[49,60,24,31],[49,63,25,6],[49,98,25,25,"Constants"],[49,121,25,35,"experienceUrl"],[49,134,25,6],[49,135,24,31],[49,138,26,6],[49,142,24,7],[52,0,28,7],[52,11,28,22,"downloadAsync"],[52,24,28,7],[52,25,28,36,"uri"],[52,28,28,7],[52,30,28,41,"hash"],[52,34,28,7],[52,36,28,47,"type"],[52,40,28,7],[52,42,28,53,"name"],[52,46,28,7],[53,0,28,7],[54,0,28,7],[55,0,28,7],[56,0,28,7],[57,0,28,7],[57,17,29,8,"IS_MANAGED_ENV"],[57,31,28,7],[58,0,28,7],[59,0,28,7],[60,0,28,7],[62,0,28,7],[62,45,30,15,"_downloadAsyncManagedEnv"],[62,69,30,39],[62,70,30,40,"uri"],[62,73,30,39],[62,75,30,45,"hash"],[62,79,30,39],[62,81,30,51,"type"],[62,85,30,39],[62,87,30,57,"name"],[62,91,30,39],[62,92,28,7],[64,0,28,7],[65,0,28,7],[65,45,32,11,"_downloadAsyncUnmanagedEnv"],[65,71,32,37],[65,72,32,38,"uri"],[65,75,32,37],[65,77,32,43,"hash"],[65,81,32,37],[65,83,32,49,"type"],[65,87,32,37],[65,88,28,7],[67,0,28,7],[68,0,28,7],[69,0,28,7],[70,0,28,7],[71,0,28,7],[72,0,28,7],[73,0,28,7],[75,0,38,0],[75,11,38,15,"_downloadAsyncManagedEnv"],[75,35,38,0],[75,36,38,40,"uri"],[75,39,38,0],[75,41,38,45,"hash"],[75,45,38,0],[75,47,38,51,"type"],[75,51,38,0],[75,53,38,57,"name"],[75,57,38,0],[76,0,38,0],[78,0,38,0],[79,0,38,0],[80,0,38,0],[81,0,38,0],[82,0,39,10,"cacheFileId"],[82,12,39,10,"cacheFileId"],[82,23,38,0],[82,26,39,24,"hash"],[82,30,39,28],[82,34,39,32],[82,58,39,43,"uri"],[82,61,39,32],[82,62,38,0],[83,0,40,10,"localUri"],[83,12,40,10,"localUri"],[83,20,38,0],[83,23,40,24,"FileSystem"],[83,33,40,34],[83,34,40,35,"cacheDirectory"],[83,48,38,0],[83,70,40,66,"cacheFileId"],[83,81,38,0],[83,90,40,81,"type"],[83,94,38,0],[84,0,38,0],[85,0,38,0],[85,46,41,32,"FileSystem"],[85,56,41,42],[85,57,41,43,"getInfoAsync"],[85,69,41,32],[85,70,41,56,"localUri"],[85,78,41,32],[85,80,41,66],[86,0,42,8,"md5"],[86,14,42,8,"md5"],[86,17,42,11],[86,19,42,13],[87,0,41,66],[87,13,41,32],[87,14,38,0],[89,0,38,0],[90,0,38,0],[91,0,41,10,"exists"],[91,12,41,10,"exists"],[91,18,38,0],[91,43,41,10,"exists"],[91,49,38,0],[92,0,41,18,"md5"],[92,12,41,18,"md5"],[92,15,38,0],[92,40,41,18,"md5"],[92,43,38,0],[94,0,38,0],[94,18,44,8],[94,19,44,9,"exists"],[94,25,44,8],[94,29,44,20,"hash"],[94,33,44,24],[94,38,44,29],[94,42,44,20],[94,46,44,37,"md5"],[94,49,44,40],[94,54,44,45,"hash"],[94,58,38,0],[95,0,38,0],[96,0,38,0],[97,0,38,0],[99,0,38,0],[100,0,38,0],[100,46,45,25,"FileSystem"],[100,56,45,35],[100,57,45,36,"downloadAsync"],[100,70,45,25],[100,71,45,50,"uri"],[100,74,45,25],[100,76,45,55,"localUri"],[100,84,45,25],[100,86,45,65],[101,0,46,12,"md5"],[101,14,46,12,"md5"],[101,17,46,15],[101,19,46,17],[102,0,45,65],[102,13,45,25],[102,14,38,0],[104,0,38,0],[105,0,38,0],[106,0,45,11,"md5"],[106,12,45,11,"md5"],[106,15,38,0],[106,40,45,11,"md5"],[106,43,38,0],[108,0,38,0],[108,18,48,12,"hash"],[108,22,48,16],[108,27,48,21],[108,31,48,12],[108,35,48,29,"md5"],[108,38,48,32],[108,43,48,37,"hash"],[108,47,38,0],[109,0,38,0],[110,0,38,0],[111,0,38,0],[113,0,38,0],[113,18,49,18],[113,22,49,22,"Error"],[113,27,49,18],[113,28,49,28],[113,60,49,58,"name"],[113,64,49,28],[113,73,49,66,"type"],[113,77,49,28],[113,104,50,30,"uri"],[113,107,49,28],[113,145,49,18],[113,146,38,0],[115,0,38,0],[116,0,38,0],[116,46,54,11,"localUri"],[116,54,38,0],[118,0,38,0],[119,0,38,0],[120,0,38,0],[121,0,38,0],[122,0,38,0],[123,0,38,0],[124,0,38,0],[126,0,61,0],[126,11,61,15,"_downloadAsyncUnmanagedEnv"],[126,37,61,0],[126,38,61,42,"uri"],[126,41,61,0],[126,43,61,47,"hash"],[126,47,61,0],[126,49,61,53,"type"],[126,53,61,0],[127,0,61,0],[128,0,61,0],[129,0,61,0],[130,0,61,0],[131,0,61,0],[132,0,61,0],[132,17,64,8,"uri"],[132,20,64,11],[132,21,64,12,"startsWith"],[132,31,64,8],[132,32,64,23],[132,41,64,8],[132,42,61,0],[133,0,61,0],[134,0,61,0],[135,0,61,0],[137,0,61,0],[137,46,65,15,"uri"],[137,49,61,0],[139,0,61,0],[140,0,67,10,"cacheFileId"],[140,12,67,10,"cacheFileId"],[140,23,61,0],[140,26,67,24,"hash"],[140,30,67,28],[140,34,67,32],[140,58,67,43,"uri"],[140,61,67,32],[140,62,61,0],[141,0,68,10,"localUri"],[141,12,68,10,"localUri"],[141,20,61,0],[141,23,68,24,"FileSystem"],[141,33,68,34],[141,34,68,35,"cacheDirectory"],[141,48,61,0],[141,70,68,66,"cacheFileId"],[141,81,61,0],[141,90,68,81,"type"],[141,94,61,0],[142,0,61,0],[143,0,61,0],[143,46,71,10,"FileSystem"],[143,56,71,20],[143,57,71,21,"downloadAsync"],[143,70,71,10],[143,71,71,35,"uri"],[143,74,71,10],[143,76,71,40,"localUri"],[143,84,71,10],[143,85,61,0],[145,0,61,0],[146,0,61,0],[146,46,72,11,"localUri"],[146,54,61,0],[148,0,61,0],[149,0,61,0],[150,0,61,0],[151,0,61,0],[152,0,61,0],[153,0,61,0],[154,0,61,0]],"functionMap":{"names":["<global>","getLocalAssets","getManifest","downloadAsync","_downloadAsyncManagedEnv","_downloadAsyncUnmanagedEnv"],"mappings":"AAA;OCgB;CDE;OEC;CFE;OGM;CHK;AIK;CJiB;AKM;CLY"}},"type":"js/module"}]}