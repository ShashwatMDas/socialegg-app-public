{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/interopRequireWildcard","data":{"isAsync":false}},{"name":"react","data":{"isAsync":false}},{"name":"./NavigationBuilderContext","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  var _interopRequireWildcard = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireWildcard\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOnAction;\n\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[2], \"react\"));\n\n  var _NavigationBuilderContext = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"./NavigationBuilderContext\"));\n\n  function useOnAction(_ref) {\n    var router = _ref.router,\n        getState = _ref.getState,\n        setState = _ref.setState,\n        key = _ref.key,\n        listeners = _ref.listeners,\n        routerConfigOptions = _ref.routerConfigOptions;\n\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n        onActionParent = _React$useContext.onAction,\n        onRouteFocusParent = _React$useContext.onRouteFocus,\n        addActionListenerParent = _React$useContext.addActionListener,\n        trackAction = _React$useContext.trackAction;\n\n    var routerConfigOptionsRef = React.useRef(routerConfigOptions);\n    React.useEffect(function () {\n      routerConfigOptionsRef.current = routerConfigOptions;\n    });\n    var onAction = React.useCallback(function (action) {\n      var visitedNavigators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();\n      var state = getState();\n\n      if (visitedNavigators.has(state.key)) {\n        return false;\n      }\n\n      visitedNavigators.add(state.key);\n\n      if (typeof action.target === 'string' && action.target !== state.key) {\n        return false;\n      }\n\n      var result = router.getStateForAction(state, action, routerConfigOptionsRef.current);\n      result = result === null && action.target === state.key ? state : result;\n\n      if (result !== null) {\n        trackAction(action);\n\n        if (state !== result) {\n          setState(result);\n        }\n\n        if (onRouteFocusParent !== undefined) {\n          var shouldFocus = router.shouldActionChangeFocus(action);\n\n          if (shouldFocus && key !== undefined) {\n            onRouteFocusParent(key);\n          }\n        }\n\n        return true;\n      }\n\n      if (onActionParent !== undefined) {\n        if (onActionParent(action, visitedNavigators)) {\n          return true;\n        }\n      }\n\n      for (var i = listeners.length - 1; i >= 0; i--) {\n        var listener = listeners[i];\n\n        if (listener(action, visitedNavigators)) {\n          return true;\n        }\n      }\n\n      return false;\n    }, [getState, router, onActionParent, trackAction, onRouteFocusParent, setState, key, listeners]);\n    React.useEffect(function () {\n      return addActionListenerParent == null ? void 0 : addActionListenerParent(onAction);\n    }, [addActionListenerParent, onAction]);\n    return onAction;\n  }\n});","lineCount":89,"map":[[11,0,1,0],[13,0,9,0],[15,0,31,15],[15,11,31,24,"useOnAction"],[15,22,31,15],[15,29,38,12],[16,0,38,12],[16,8,32,2,"router"],[16,14,38,12],[16,22,32,2,"router"],[16,28,38,12],[17,0,38,12],[17,8,33,2,"getState"],[17,16,38,12],[17,24,33,2,"getState"],[17,32,38,12],[18,0,38,12],[18,8,34,2,"setState"],[18,16,38,12],[18,24,34,2,"setState"],[18,32,38,12],[19,0,38,12],[19,8,35,2,"key"],[19,11,38,12],[19,19,35,2,"key"],[19,22,38,12],[20,0,38,12],[20,8,36,2,"listeners"],[20,17,38,12],[20,25,36,2,"listeners"],[20,34,38,12],[21,0,38,12],[21,8,37,2,"routerConfigOptions"],[21,27,38,12],[21,35,37,2,"routerConfigOptions"],[21,54,38,12],[23,0,38,12],[23,28,44,6,"React"],[23,33,44,11],[23,34,44,12,"useContext"],[23,44,44,6],[23,45,44,23,"NavigationBuilderContext"],[23,78,44,6],[23,79,38,12],[24,0,38,12],[24,8,40,14,"onActionParent"],[24,22,38,12],[24,43,40,4,"onAction"],[24,51,38,12],[25,0,38,12],[25,8,41,18,"onRouteFocusParent"],[25,26,38,12],[25,47,41,4,"onRouteFocus"],[25,59,38,12],[26,0,38,12],[26,8,42,23,"addActionListenerParent"],[26,31,38,12],[26,52,42,4,"addActionListener"],[26,69,38,12],[27,0,38,12],[27,8,43,4,"trackAction"],[27,19,38,12],[27,40,43,4,"trackAction"],[27,51,38,12],[29,0,46,2],[29,8,46,8,"routerConfigOptionsRef"],[29,30,46,30],[29,33,46,33,"React"],[29,38,46,38],[29,39,46,39,"useRef"],[29,45,46,33],[29,46,47,4,"routerConfigOptions"],[29,65,46,33],[29,66,46,2],[30,0,50,2,"React"],[30,4,50,2,"React"],[30,9,50,7],[30,10,50,8,"useEffect"],[30,19,50,2],[30,20,50,18],[30,32,50,24],[31,0,51,4,"routerConfigOptionsRef"],[31,6,51,4,"routerConfigOptionsRef"],[31,28,51,26],[31,29,51,27,"current"],[31,36,51,4],[31,39,51,37,"routerConfigOptions"],[31,58,51,4],[32,0,52,3],[32,5,50,2],[33,0,54,2],[33,8,54,8,"onAction"],[33,16,54,16],[33,19,54,19,"React"],[33,24,54,24],[33,25,54,25,"useCallback"],[33,36,54,19],[33,37,55,4],[33,47,56,6,"action"],[33,53,55,4],[33,55,58,9],[34,0,58,9],[34,10,57,6,"visitedNavigators"],[34,27,58,9],[34,98,57,39],[34,102,57,43,"Set"],[34,105,57,39],[34,107,58,9],[35,0,59,6],[35,10,59,12,"state"],[35,15,59,17],[35,18,59,20,"getState"],[35,26,59,28],[35,28,59,6],[37,0,63,6],[37,10,63,10,"visitedNavigators"],[37,27,63,27],[37,28,63,28,"has"],[37,31,63,10],[37,32,63,32,"state"],[37,37,63,37],[37,38,63,38,"key"],[37,41,63,10],[37,42,63,6],[37,44,63,44],[38,0,64,8],[38,15,64,15],[38,20,64,8],[39,0,65,7],[41,0,67,6,"visitedNavigators"],[41,6,67,6,"visitedNavigators"],[41,23,67,23],[41,24,67,24,"add"],[41,27,67,6],[41,28,67,28,"state"],[41,33,67,33],[41,34,67,34,"key"],[41,37,67,6],[43,0,69,6],[43,10,69,10],[43,17,69,17,"action"],[43,23,69,23],[43,24,69,24,"target"],[43,30,69,10],[43,35,69,35],[43,43,69,10],[43,47,69,47,"action"],[43,53,69,53],[43,54,69,54,"target"],[43,60,69,47],[43,65,69,65,"state"],[43,70,69,70],[43,71,69,71,"key"],[43,74,69,6],[43,76,69,76],[44,0,70,8],[44,15,70,15],[44,20,70,8],[45,0,71,7],[47,0,73,6],[47,10,73,10,"result"],[47,16,73,16],[47,19,73,19,"router"],[47,25,73,25],[47,26,73,26,"getStateForAction"],[47,43,73,19],[47,44,74,8,"state"],[47,49,73,19],[47,51,75,8,"action"],[47,57,73,19],[47,59,76,8,"routerConfigOptionsRef"],[47,81,76,30],[47,82,76,31,"current"],[47,89,73,19],[47,90,73,6],[48,0,81,6,"result"],[48,6,81,6,"result"],[48,12,81,12],[48,15,81,15,"result"],[48,21,81,21],[48,26,81,26],[48,30,81,15],[48,34,81,34,"action"],[48,40,81,40],[48,41,81,41,"target"],[48,47,81,34],[48,52,81,52,"state"],[48,57,81,57],[48,58,81,58,"key"],[48,61,81,15],[48,64,81,64,"state"],[48,69,81,15],[48,72,81,72,"result"],[48,78,81,6],[50,0,83,6],[50,10,83,10,"result"],[50,16,83,16],[50,21,83,21],[50,25,83,6],[50,27,83,27],[51,0,84,8,"trackAction"],[51,8,84,8,"trackAction"],[51,19,84,19],[51,20,84,20,"action"],[51,26,84,19],[51,27,84,8],[53,0,86,8],[53,12,86,12,"state"],[53,17,86,17],[53,22,86,22,"result"],[53,28,86,8],[53,30,86,30],[54,0,87,10,"setState"],[54,10,87,10,"setState"],[54,18,87,18],[54,19,87,19,"result"],[54,25,87,18],[54,26,87,10],[55,0,88,9],[57,0,90,8],[57,12,90,12,"onRouteFocusParent"],[57,30,90,30],[57,35,90,35,"undefined"],[57,44,90,8],[57,46,90,46],[58,0,93,10],[58,14,93,16,"shouldFocus"],[58,25,93,27],[58,28,93,30,"router"],[58,34,93,36],[58,35,93,37,"shouldActionChangeFocus"],[58,58,93,30],[58,59,93,61,"action"],[58,65,93,30],[58,66,93,10],[60,0,95,10],[60,14,95,14,"shouldFocus"],[60,25,95,25],[60,29,95,29,"key"],[60,32,95,32],[60,37,95,37,"undefined"],[60,46,95,10],[60,48,95,48],[61,0,96,12,"onRouteFocusParent"],[61,12,96,12,"onRouteFocusParent"],[61,30,96,30],[61,31,96,31,"key"],[61,34,96,30],[61,35,96,12],[62,0,97,11],[63,0,98,9],[65,0,100,8],[65,15,100,15],[65,19,100,8],[66,0,101,7],[68,0,103,6],[68,10,103,10,"onActionParent"],[68,24,103,24],[68,29,103,29,"undefined"],[68,38,103,6],[68,40,103,40],[69,0,105,8],[69,12,105,12,"onActionParent"],[69,26,105,26],[69,27,105,27,"action"],[69,33,105,26],[69,35,105,35,"visitedNavigators"],[69,52,105,26],[69,53,105,8],[69,55,105,55],[70,0,106,10],[70,17,106,17],[70,21,106,10],[71,0,107,9],[72,0,108,7],[74,0,111,6],[74,11,111,11],[74,15,111,15,"i"],[74,16,111,16],[74,19,111,19,"listeners"],[74,28,111,28],[74,29,111,29,"length"],[74,35,111,19],[74,38,111,38],[74,39,111,6],[74,41,111,41,"i"],[74,42,111,42],[74,46,111,46],[74,47,111,6],[74,49,111,49,"i"],[74,50,111,50],[74,52,111,6],[74,54,111,54],[75,0,112,8],[75,12,112,14,"listener"],[75,20,112,22],[75,23,112,25,"listeners"],[75,32,112,34],[75,33,112,35,"i"],[75,34,112,34],[75,35,112,8],[77,0,114,8],[77,12,114,12,"listener"],[77,20,114,20],[77,21,114,21,"action"],[77,27,114,20],[77,29,114,29,"visitedNavigators"],[77,46,114,20],[77,47,114,8],[77,49,114,49],[78,0,115,10],[78,17,115,17],[78,21,115,10],[79,0,116,9],[80,0,117,7],[82,0,119,6],[82,13,119,13],[82,18,119,6],[83,0,120,5],[83,5,54,19],[83,7,121,4],[83,8,122,6,"getState"],[83,16,121,4],[83,18,123,6,"router"],[83,24,121,4],[83,26,124,6,"onActionParent"],[83,40,121,4],[83,42,125,6,"trackAction"],[83,53,121,4],[83,55,126,6,"onRouteFocusParent"],[83,73,121,4],[83,75,127,6,"setState"],[83,83,121,4],[83,85,128,6,"key"],[83,88,121,4],[83,90,129,6,"listeners"],[83,99,121,4],[83,100,54,19],[83,101,54,2],[84,0,133,2,"React"],[84,4,133,2,"React"],[84,9,133,7],[84,10,133,8,"useEffect"],[84,19,133,2],[84,20,133,18],[85,0,133,18],[85,13,133,24,"addActionListenerParent"],[85,36,133,18],[85,56,133,24,"addActionListenerParent"],[85,79,133,47],[85,80,133,50,"onAction"],[85,88,133,47],[85,89,133,18],[86,0,133,18],[86,5,133,2],[86,7,133,61],[86,8,134,4,"addActionListenerParent"],[86,31,133,61],[86,33,135,4,"onAction"],[86,41,133,61],[86,42,133,2],[87,0,138,2],[87,11,138,9,"onAction"],[87,19,138,2],[88,0,139,1]],"functionMap":{"names":["<global>","useOnAction","React.useEffect$argument_0","React.useCallback$argument_0"],"mappings":"AAA;eC8B;kBCmB;GDE;IEG;KFiE;kBCa,yCD;CDM"}},"type":"js/module"}]}