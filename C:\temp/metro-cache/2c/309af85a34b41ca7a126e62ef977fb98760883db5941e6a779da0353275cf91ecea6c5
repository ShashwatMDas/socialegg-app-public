{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/assertThisInitialized","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"eventemitter3","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var _assertThisInitialized = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/assertThisInitialized\");\n\n  var _inherits = _$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/inherits\");\n\n  var _possibleConstructorReturn = _$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/possibleConstructorReturn\");\n\n  var _getPrototypeOf = _$$_REQUIRE(_dependencyMap[5], \"@babel/runtime/helpers/getPrototypeOf\");\n\n  function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\n  function _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var EventEmitter = _$$_REQUIRE(_dependencyMap[6], \"eventemitter3\");\n\n  var WebSocketHMRClient = function (_EventEmitter) {\n    _inherits(WebSocketHMRClient, _EventEmitter);\n\n    var _super = _createSuper(WebSocketHMRClient);\n\n    function WebSocketHMRClient(url) {\n      var _this;\n\n      _classCallCheck(this, WebSocketHMRClient);\n\n      _this = _super.call(this);\n\n      _defineProperty(_assertThisInitialized(_this), \"_queue\", []);\n\n      _defineProperty(_assertThisInitialized(_this), \"_state\", \"opening\");\n\n      _this._ws = new global.WebSocket(url);\n\n      _this._ws.onopen = function () {\n        _this._state = \"open\";\n\n        _this.emit(\"open\");\n\n        _this._flushQueue();\n      };\n\n      _this._ws.onerror = function (error) {\n        _this.emit(\"connection-error\", error);\n      };\n\n      _this._ws.onclose = function () {\n        _this._state = \"closed\";\n\n        _this.emit(\"close\");\n      };\n\n      _this._ws.onmessage = function (message) {\n        var data = JSON.parse(message.data);\n\n        switch (data.type) {\n          case \"bundle-registered\":\n            _this.emit(\"bundle-registered\");\n\n            break;\n\n          case \"update-start\":\n            _this.emit(\"update-start\", data.body);\n\n            break;\n\n          case \"update\":\n            _this.emit(\"update\", data.body);\n\n            break;\n\n          case \"update-done\":\n            _this.emit(\"update-done\");\n\n            break;\n\n          case \"error\":\n            _this.emit(\"error\", data.body);\n\n            break;\n\n          default:\n            _this.emit(\"error\", {\n              type: \"unknown-message\",\n              message: data\n            });\n\n        }\n      };\n\n      return _this;\n    }\n\n    _createClass(WebSocketHMRClient, [{\n      key: \"close\",\n      value: function close() {\n        this._ws.close();\n      }\n    }, {\n      key: \"send\",\n      value: function send(message) {\n        switch (this._state) {\n          case \"opening\":\n            this._queue.push(message);\n\n            break;\n\n          case \"open\":\n            this._ws.send(message);\n\n            break;\n\n          case \"closed\":\n            break;\n\n          default:\n            throw new Error(\"[WebSocketHMRClient] Unknown state: \" + this._state);\n        }\n      }\n    }, {\n      key: \"_flushQueue\",\n      value: function _flushQueue() {\n        var _this2 = this;\n\n        this._queue.forEach(function (message) {\n          return _this2.send(message);\n        });\n\n        this._queue.length = 0;\n      }\n    }]);\n\n    return WebSocketHMRClient;\n  }(EventEmitter);\n\n  module.exports = WebSocketHMRClient;\n});","lineCount":157,"map":[[2,0,10,0],[20,0,12,0],[20,11,12,9,"_defineProperty"],[20,26,12,0],[20,27,12,25,"obj"],[20,30,12,0],[20,32,12,30,"key"],[20,35,12,0],[20,37,12,35,"value"],[20,42,12,0],[20,44,12,42],[21,0,13,2],[21,8,13,6,"key"],[21,11,13,9],[21,15,13,13,"obj"],[21,18,13,2],[21,20,13,18],[22,0,14,4,"Object"],[22,6,14,4,"Object"],[22,12,14,10],[22,13,14,11,"defineProperty"],[22,27,14,4],[22,28,14,26,"obj"],[22,31,14,4],[22,33,14,31,"key"],[22,36,14,4],[22,38,14,36],[23,0,15,6,"value"],[23,8,15,6,"value"],[23,13,15,11],[23,15,15,13,"value"],[23,20,14,36],[24,0,16,6,"enumerable"],[24,8,16,6,"enumerable"],[24,18,16,16],[24,20,16,18],[24,24,14,36],[25,0,17,6,"configurable"],[25,8,17,6,"configurable"],[25,20,17,18],[25,22,17,20],[25,26,14,36],[26,0,18,6,"writable"],[26,8,18,6,"writable"],[26,16,18,14],[26,18,18,16],[27,0,14,36],[27,7,14,4],[28,0,20,3],[28,5,13,2],[28,11,20,9],[29,0,21,4,"obj"],[29,6,21,4,"obj"],[29,9,21,7],[29,10,21,8,"key"],[29,13,21,7],[29,14,21,4],[29,17,21,15,"value"],[29,22,21,4],[30,0,22,3],[32,0,23,2],[32,11,23,9,"obj"],[32,14,23,2],[33,0,24,1],[35,0,26,0],[35,6,26,6,"EventEmitter"],[35,18,26,18],[35,21,26,21,"require"],[35,32,26,28],[35,68,26,0],[37,6,32,6,"WebSocketHMRClient"],[37,24],[42,0,33,2],[42,32,33,14,"url"],[42,35,33,2],[42,37,33,19],[43,0,33,19],[45,0,33,19],[47,0,34,4],[49,0,37,4,"_defineProperty"],[49,6,37,4,"_defineProperty"],[49,21,37,19],[49,53,37,26],[49,61,37,19],[49,63,37,36],[49,65,37,19],[49,66,37,4],[51,0,39,4,"_defineProperty"],[51,6,39,4,"_defineProperty"],[51,21,39,19],[51,53,39,26],[51,61,39,19],[51,63,39,36],[51,72,39,19],[51,73,39,4],[53,0,41,4],[53,12,41,9,"_ws"],[53,15,41,4],[53,18,41,15],[53,22,41,19,"global"],[53,28,41,25],[53,29,41,26,"WebSocket"],[53,38,41,15],[53,39,41,36,"url"],[53,42,41,15],[53,43,41,4],[55,0,43,4],[55,12,43,9,"_ws"],[55,15,43,4],[55,16,43,13,"onopen"],[55,22,43,4],[55,25,43,22],[55,37,43,28],[56,0,44,6],[56,14,44,11,"_state"],[56,20,44,6],[56,23,44,20],[56,29,44,6],[58,0,45,6],[58,14,45,11,"emit"],[58,18,45,6],[58,19,45,16],[58,25,45,6],[60,0,47,6],[60,14,47,11,"_flushQueue"],[60,25,47,6],[61,0,48,5],[61,7,43,4],[63,0,50,4],[63,12,50,9,"_ws"],[63,15,50,4],[63,16,50,13,"onerror"],[63,23,50,4],[63,26,50,23],[63,36,50,23,"error"],[63,41,50,28],[63,43,50,32],[64,0,51,6],[64,14,51,11,"emit"],[64,18,51,6],[64,19,51,16],[64,37,51,6],[64,39,51,36,"error"],[64,44,51,6],[65,0,52,5],[65,7,50,4],[67,0,54,4],[67,12,54,9,"_ws"],[67,15,54,4],[67,16,54,13,"onclose"],[67,23,54,4],[67,26,54,23],[67,38,54,29],[68,0,55,6],[68,14,55,11,"_state"],[68,20,55,6],[68,23,55,20],[68,31,55,6],[70,0,56,6],[70,14,56,11,"emit"],[70,18,56,6],[70,19,56,16],[70,26,56,6],[71,0,57,5],[71,7,54,4],[73,0,59,4],[73,12,59,9,"_ws"],[73,15,59,4],[73,16,59,13,"onmessage"],[73,25,59,4],[73,28,59,25],[73,38,59,25,"message"],[73,45,59,32],[73,47,59,36],[74,0,60,6],[74,12,60,12,"data"],[74,16,60,16],[74,19,60,19,"JSON"],[74,23,60,23],[74,24,60,24,"parse"],[74,29,60,19],[74,30,60,30,"message"],[74,37,60,37],[74,38,60,38,"data"],[74,42,60,19],[74,43,60,6],[76,0,62,6],[76,16,62,14,"data"],[76,20,62,18],[76,21,62,19,"type"],[76,25,62,6],[77,0,63,8],[77,15,63,13],[77,34,63,8],[78,0,64,10],[78,18,64,15,"emit"],[78,22,64,10],[78,23,64,20],[78,42,64,10],[80,0,65,10],[82,0,67,8],[82,15,67,13],[82,29,67,8],[83,0,68,10],[83,18,68,15,"emit"],[83,22,68,10],[83,23,68,20],[83,37,68,10],[83,39,68,36,"data"],[83,43,68,40],[83,44,68,41,"body"],[83,48,68,10],[85,0,69,10],[87,0,71,8],[87,15,71,13],[87,23,71,8],[88,0,72,10],[88,18,72,15,"emit"],[88,22,72,10],[88,23,72,20],[88,31,72,10],[88,33,72,30,"data"],[88,37,72,34],[88,38,72,35,"body"],[88,42,72,10],[90,0,73,10],[92,0,75,8],[92,15,75,13],[92,28,75,8],[93,0,76,10],[93,18,76,15,"emit"],[93,22,76,10],[93,23,76,20],[93,36,76,10],[95,0,77,10],[97,0,79,8],[97,15,79,13],[97,22,79,8],[98,0,80,10],[98,18,80,15,"emit"],[98,22,80,10],[98,23,80,20],[98,30,80,10],[98,32,80,29,"data"],[98,36,80,33],[98,37,80,34,"body"],[98,41,80,10],[100,0,81,10],[102,0,83,8],[103,0,84,10],[103,18,84,15,"emit"],[103,22,84,10],[103,23,84,20],[103,30,84,10],[103,32,84,29],[104,0,85,12,"type"],[104,14,85,12,"type"],[104,18,85,16],[104,20,85,18],[104,37,84,29],[105,0,86,12,"message"],[105,14,86,12,"message"],[105,21,86,19],[105,23,86,21,"data"],[106,0,84,29],[106,13,84,10],[108,0,62,6],[109,0,89,5],[109,7,59,4],[111,0,33,19],[112,0,90,3],[116,30,92,10],[117,0,93,4],[117,13,93,9,"_ws"],[117,16,93,4],[117,17,93,13,"close"],[117,22,93,4],[118,0,94,3],[121,27,96,7,"message"],[121,34],[121,36,96,16],[122,0,97,4],[122,16,97,12],[122,21,97,17,"_state"],[122,27,97,4],[123,0,98,6],[123,15,98,11],[123,24,98,6],[124,0,99,8],[124,17,99,13,"_queue"],[124,23,99,8],[124,24,99,20,"push"],[124,28,99,8],[124,29,99,25,"message"],[124,36,99,8],[126,0,101,8],[128,0,103,6],[128,15,103,11],[128,21,103,6],[129,0,104,8],[129,17,104,13,"_ws"],[129,20,104,8],[129,21,104,17,"send"],[129,25,104,8],[129,26,104,22,"message"],[129,33,104,8],[131,0,106,8],[133,0,108,6],[133,15,108,11],[133,23,108,6],[134,0,110,8],[136,0,112,6],[137,0,113,8],[137,18,113,14],[137,22,113,18,"Error"],[137,27,113,14],[137,28,113,24],[137,69,113,65],[137,74,113,70,"_state"],[137,80,113,14],[137,81,113,8],[138,0,97,4],[139,0,115,3],[142,36,117,16],[143,0,117,16],[145,0,118,4],[145,13,118,9,"_queue"],[145,19,118,4],[145,20,118,16,"forEach"],[145,27,118,4],[145,28,118,24],[145,38,118,24,"message"],[145,45,118,31],[146,0,118,31],[146,17,118,35],[146,23,118,39],[146,24,118,40,"send"],[146,28,118,35],[146,29,118,45,"message"],[146,36,118,35],[146,37,118,31],[147,0,118,31],[147,9,118,4],[149,0,120,4],[149,13,120,9,"_queue"],[149,19,120,4],[149,20,120,16,"length"],[149,26,120,4],[149,29,120,25],[149,30,120,4],[150,0,121,3],[154,4,32,33,"EventEmitter"],[154,16],[156,0,124,0,"module"],[156,2,124,0,"module"],[156,8,124,6],[156,9,124,7,"exports"],[156,16,124,0],[156,19,124,17,"WebSocketHMRClient"],[156,37,124,0]],"functionMap":{"names":["<global>","_defineProperty","WebSocketHMRClient","constructor","_ws.onopen","_ws.onerror","_ws.onclose","_ws.onmessage","close","send","_flushQueue","_queue.forEach$argument_0"],"mappings":"AAA;ACW;CDY;AEQ;ECC;sBCU;KDK;uBEE;KFE;uBGE;KHG;yBIE;KJ8B;GDC;EME;GNE;EOE;GPmB;EQE;wBCC,6BD;GRG;CFC"}},"type":"js/module"}]}