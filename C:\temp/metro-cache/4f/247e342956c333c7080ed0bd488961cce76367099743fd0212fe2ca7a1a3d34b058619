{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"fbjs/lib/performanceNow","data":{"isAsync":false}},{"name":"fbjs/lib/warning","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]);function l(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,l)}return s}function o(n){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?l(Object(o),!0).forEach(function(s){t(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}var _=r(d[3]),h=r(d[4]),u=function t(){s(this,t),this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0},f=[],c=10,y=null,p=(function(){function t(n){s(this,t),this._anyBlankStartTime=null,this._enabled=!1,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=n,this._enabled=(y||0)>Math.random(),this._resetData()}return n(t,null,[{key:\"addListener\",value:function(t){return h(null!==y,'Call `FillRateHelper.setSampleRate` before `addListener`.'),f.push(t),{remove:function(){f=f.filter(function(n){return t!==n})}}}},{key:\"setSampleRate\",value:function(t){y=t}},{key:\"setMinSampleCount\",value:function(t){c=t}}]),n(t,[{key:\"activate\",value:function(){this._enabled&&null==this._samplesStartTime&&(this._samplesStartTime=_())}},{key:\"deactivateAndFlush\",value:function(){if(this._enabled){var t=this._samplesStartTime;if(null!=t)if(this._info.sample_count<c)this._resetData();else{var n=_()-t,s=o({},this._info,{total_time_spent:n});f.forEach(function(t){return t(s)}),this._resetData()}}}},{key:\"computeBlankness\",value:function(t,n,s){if(!this._enabled||0===t.getItemCount(t.data)||null==this._samplesStartTime)return 0;var l=s.dOffset,o=s.offset,h=s.velocity,u=s.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(u),this._info.pixels_scrolled+=Math.round(Math.abs(l));var f=Math.round(1e3*Math.abs(h)),c=_();null!=this._anyBlankStartTime&&(this._info.any_blank_ms+=c-this._anyBlankStartTime),this._anyBlankStartTime=null,null!=this._mostlyBlankStartTime&&(this._info.mostly_blank_ms+=c-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var y=0,p=n.first,b=this._getFrameMetrics(p);p<=n.last&&(!b||!b.inLayout);)b=this._getFrameMetrics(p),p++;b&&p>0&&(y=Math.min(u,Math.max(0,b.offset-o)));for(var k=0,v=n.last,S=this._getFrameMetrics(v);v>=n.first&&(!S||!S.inLayout);)S=this._getFrameMetrics(v),v--;if(S&&v<t.getItemCount(t.data)-1){var M=S.offset+S.length;k=Math.min(u,Math.max(0,o+u-M))}var O=Math.round(y+k),T=O/u;return T>0?(this._anyBlankStartTime=c,this._info.any_blank_speed_sum+=f,this._info.any_blank_count++,this._info.pixels_blank+=O,T>.5&&(this._mostlyBlankStartTime=c,this._info.mostly_blank_count++)):(f<.01||Math.abs(l)<1)&&this.deactivateAndFlush(),T}},{key:\"enabled\",value:function(){return this._enabled}},{key:\"_resetData\",value:function(){this._anyBlankStartTime=null,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}]),t})();m.exports=p});","lineCount":1,"map":[[1,28,11,0],[1,644,13,0],[1,648,13,6,"performanceNow"],[1,650,13,23,"require"],[1,652,13,30,"d"],[1,654,13,30],[1,658,14,6,"warning"],[1,660,14,16,"require"],[1,662,14,23,"d"],[1,664,14,23],[1,668,18,6,"Info"],[1,698,19,2,"any_blank_count"],[1,714,19,28],[1,721,20,2,"any_blank_ms"],[1,734,20,25],[1,741,21,2,"any_blank_speed_sum"],[1,761,21,32],[1,768,22,2,"mostly_blank_count"],[1,787,22,31],[1,794,23,2,"mostly_blank_ms"],[1,810,23,28],[1,817,24,2,"pixels_blank"],[1,830,24,25],[1,837,25,2,"pixels_sampled"],[1,852,25,27],[1,859,26,2,"pixels_scrolled"],[1,875,26,28],[1,882,27,2,"total_time_spent"],[1,899,27,29],[1,906,28,2,"sample_count"],[1,919,28,25],[1,922,35,4,"_listeners"],[1,927,36,4,"_minSampleCount"],[1,929,36,22],[1,932,37,4,"_sampleRate"],[1,934,37,30],[1,939,47,6,"FillRateHelper"],[1,953,76,2],[1,962,76,2,"FillRateHelper"],[1,964,76,14,"getFrameMetrics"],[1,967,76,65,"_classCallCheck"],[1,969,76,65,"this"],[1,974,76,65,"FillRateHelper"],[1,977,76,65,"this"],[1,982,48,2,"_anyBlankStartTime"],[1,1001,48,24],[1,1006,76,65,"this"],[1,1011,49,2,"_enabled"],[1,1021,49,13],[1,1023,76,65,"this"],[1,1028,51,2,"_info"],[1,1034,51,10],[1,1038,51,14,"Info"],[1,1040,76,65,"this"],[1,1045,52,2,"_mostlyBlankStartTime"],[1,1067,52,27],[1,1072,76,65,"this"],[1,1077,53,2,"_samplesStartTime"],[1,1095,53,23],[1,1100,77,4,"this"],[1,1105,77,9,"_getFrameMetrics"],[1,1122,77,28,"getFrameMetrics"],[1,1124,78,4,"this"],[1,1129,78,9,"_enabled"],[1,1139,78,21,"_sampleRate"],[1,1142,78,36],[1,1145,78,41,"Math"],[1,1150,78,46,"random"],[1,1159,79,4,"this"],[1,1164,79,9,"_resetData"],[1,1228,55,21,"callback"],[1,1231,61,4],[1,1238,56,4,"warning"],[1,1240,57,22],[1,1247,57,6,"_sampleRate"],[1,1249,58,6],[1,1310,60,4,"_listeners"],[1,1312,60,15,"push"],[1,1317,60,20,"callback"],[1,1321,62,6,"remove"],[1,1328,62,14],[1,1339,63,8,"_listeners"],[1,1341,63,21,"_listeners"],[1,1343,63,32,"filter"],[1,1350,63,39],[1,1359,63,39,"listener"],[1,1362,63,47],[1,1369,63,51,"callback"],[1,1373,63,64,"listener"],[1,1417,68,23,"sampleRate"],[1,1420,69,4,"_sampleRate"],[1,1422,69,18,"sampleRate"],[1,1466,72,27,"minSampleCount"],[1,1469,73,4,"_minSampleCount"],[1,1471,73,22,"minSampleCount"],[1,1515,83,8,"this"],[1,1520,83,13,"_enabled"],[1,1530,83,51],[1,1536,83,25,"this"],[1,1541,83,30,"_samplesStartTime"],[1,1561,85,6,"this"],[1,1566,85,11,"_samplesStartTime"],[1,1584,85,31,"performanceNow"],[1,1634,90,4],[1,1637,90,9,"this"],[1,1642,90,14,"_enabled"],[1,1651,90,4],[1,1652,93,4],[1,1656,93,10,"start"],[1,1658,93,18,"this"],[1,1663,93,23,"_samplesStartTime"],[1,1681,94,4],[1,1684,94,17],[1,1690,94,8,"start"],[1,1692,99,4],[1,1695,99,8,"this"],[1,1700,99,13,"_info"],[1,1706,99,19,"sample_count"],[1,1719,99,34,"_minSampleCount"],[1,1721,101,6,"this"],[1,1726,101,11,"_resetData"],[1,1743,99,4],[1,1744,104,4],[1,1748,104,10,"total_time_spent"],[1,1750,104,29,"performanceNow"],[1,1754,104,48,"start"],[1,1756,105,10,"info"],[1,1758,105,19,"_objectSpread"],[1,1763,106,9,"this"],[1,1768,106,14,"_info"],[1,1775,107,6,"total_time_spent"],[1,1792,107,6,"total_time_spent"],[1,1796,127,4,"_listeners"],[1,1798,127,15,"forEach"],[1,1806,127,23],[1,1815,127,23,"listener"],[1,1818,127,31],[1,1825,127,35,"listener"],[1,1827,127,44,"info"],[1,1832,128,4,"this"],[1,1837,128,9,"_resetData"],[1,1893,132,4,"props"],[1,1895,137,4,"state"],[1,1897,141,4,"scrollMetrics"],[1,1900,148,4],[1,1904,149,7,"this"],[1,1909,149,12,"_enabled"],[1,1919,150,41],[1,1923,150,6,"props"],[1,1925,150,12,"getItemCount"],[1,1938,150,25,"props"],[1,1940,150,31,"data"],[1,1947,151,32],[1,1953,151,6,"this"],[1,1958,151,11,"_samplesStartTime"],[1,1976,153,6],[1,1983,153,13],[1,1985,147,12],[1,1989,155,11,"dOffset"],[1,1991,155,55,"scrollMetrics"],[1,1993,155,11,"dOffset"],[1,2001,155,20,"offset"],[1,2003,155,55,"scrollMetrics"],[1,2005,155,20,"offset"],[1,2012,155,28,"velocity"],[1,2014,155,55,"scrollMetrics"],[1,2016,155,28,"velocity"],[1,2025,155,38,"visibleLength"],[1,2027,155,55,"scrollMetrics"],[1,2029,155,38,"visibleLength"],[1,2043,159,4,"this"],[1,2048,159,9,"_info"],[1,2054,159,15,"sample_count"],[1,2069,160,4,"this"],[1,2074,160,9,"_info"],[1,2080,160,15,"pixels_sampled"],[1,2096,160,33,"Math"],[1,2101,160,38,"round"],[1,2107,160,44,"visibleLength"],[1,2110,161,4,"this"],[1,2115,161,9,"_info"],[1,2121,161,15,"pixels_scrolled"],[1,2138,161,34,"Math"],[1,2143,161,39,"round"],[1,2149,161,45,"Math"],[1,2154,161,50,"abs"],[1,2158,161,54,"dOffset"],[1,2162,162,4],[1,2166,162,10,"scrollSpeed"],[1,2168,162,24,"Math"],[1,2173,162,29,"round"],[1,2179,162,56],[1,2183,162,35,"Math"],[1,2188,162,40,"abs"],[1,2192,162,44,"velocity"],[1,2196,165,10,"now"],[1,2198,165,16,"performanceNow"],[1,2202,166,35],[1,2208,166,8,"this"],[1,2213,166,13,"_anyBlankStartTime"],[1,2234,167,6,"this"],[1,2239,167,11,"_info"],[1,2245,167,17,"any_blank_ms"],[1,2259,167,33,"now"],[1,2261,167,39,"this"],[1,2266,167,44,"_anyBlankStartTime"],[1,2286,169,4,"this"],[1,2291,169,9,"_anyBlankStartTime"],[1,2310,169,30],[1,2315,170,38],[1,2321,170,8,"this"],[1,2326,170,13,"_mostlyBlankStartTime"],[1,2350,171,6,"this"],[1,2355,171,11,"_info"],[1,2361,171,17,"mostly_blank_ms"],[1,2378,171,36,"now"],[1,2380,171,42,"this"],[1,2385,171,47,"_mostlyBlankStartTime"],[1,2408,173,4,"this"],[1,2413,173,9,"_mostlyBlankStartTime"],[1,2435,173,33],[1,2440,178,4],[1,2444,175,4],[1,2448,175,8,"blankTop"],[1,2450,175,19],[1,2452,176,8,"first"],[1,2454,176,16,"state"],[1,2456,176,22,"first"],[1,2462,177,8,"firstFrame"],[1,2464,177,21,"this"],[1,2469,177,26,"_getFrameMetrics"],[1,2486,177,43,"first"],[1,2489,178,11,"first"],[1,2492,178,20,"state"],[1,2494,178,26,"last"],[1,2502,178,36,"firstFrame"],[1,2506,178,51,"firstFrame"],[1,2508,178,62,"inLayout"],[1,2519,179,6,"firstFrame"],[1,2521,179,19,"this"],[1,2526,179,24,"_getFrameMetrics"],[1,2543,179,41,"first"],[1,2546,180,6,"first"],[1,2550,184,8,"firstFrame"],[1,2553,184,22,"first"],[1,2555,184,30],[1,2559,185,6,"blankTop"],[1,2561,185,17,"Math"],[1,2566,185,22,"min"],[1,2570,186,8,"visibleLength"],[1,2572,187,8,"Math"],[1,2577,187,13,"max"],[1,2581,187,17],[1,2583,187,20,"firstFrame"],[1,2585,187,31,"offset"],[1,2592,187,40,"offset"],[1,2597,193,4],[1,2601,190,4],[1,2605,190,8,"blankBottom"],[1,2607,190,22],[1,2609,191,8,"last"],[1,2611,191,15,"state"],[1,2613,191,21,"last"],[1,2618,192,8,"lastFrame"],[1,2620,192,20,"this"],[1,2625,192,25,"_getFrameMetrics"],[1,2642,192,42,"last"],[1,2645,193,11,"last"],[1,2648,193,19,"state"],[1,2650,193,25,"first"],[1,2659,193,36,"lastFrame"],[1,2663,193,50,"lastFrame"],[1,2665,193,60,"inLayout"],[1,2676,194,6,"lastFrame"],[1,2678,194,18,"this"],[1,2683,194,23,"_getFrameMetrics"],[1,2700,194,40,"last"],[1,2703,195,6,"last"],[1,2707,199,4],[1,2710,199,8,"lastFrame"],[1,2713,199,21,"last"],[1,2715,199,28,"props"],[1,2717,199,34,"getItemCount"],[1,2730,199,47,"props"],[1,2732,199,53,"data"],[1,2738,199,61],[1,2740,199,64],[1,2741,200,6],[1,2745,200,12,"bottomEdge"],[1,2747,200,25,"lastFrame"],[1,2749,200,35,"offset"],[1,2756,200,44,"lastFrame"],[1,2758,200,54,"length"],[1,2765,201,6,"blankBottom"],[1,2767,201,20,"Math"],[1,2772,201,25,"min"],[1,2776,202,8,"visibleLength"],[1,2778,203,8,"Math"],[1,2783,203,13,"max"],[1,2787,203,17],[1,2789,203,20,"offset"],[1,2791,203,29,"visibleLength"],[1,2793,203,45,"bottomEdge"],[1,2797,206,4],[1,2801,206,10,"pixels_blank"],[1,2803,206,25,"Math"],[1,2808,206,30,"round"],[1,2814,206,36,"blankTop"],[1,2816,206,47,"blankBottom"],[1,2819,207,10,"blankness"],[1,2821,207,22,"pixels_blank"],[1,2823,207,37,"visibleLength"],[1,2825,220,4],[1,2832,208,8,"blankness"],[1,2834,208,20],[1,2837,209,6,"this"],[1,2842,209,11,"_anyBlankStartTime"],[1,2861,209,32,"now"],[1,2863,210,6,"this"],[1,2868,210,11,"_info"],[1,2874,210,17,"any_blank_speed_sum"],[1,2895,210,40,"scrollSpeed"],[1,2897,211,6,"this"],[1,2902,211,11,"_info"],[1,2908,211,17,"any_blank_count"],[1,2926,212,6,"this"],[1,2931,212,11,"_info"],[1,2937,212,17,"pixels_blank"],[1,2951,212,33,"pixels_blank"],[1,2953,213,10,"blankness"],[1,2955,213,22],[1,2960,214,8,"this"],[1,2965,214,13,"_mostlyBlankStartTime"],[1,2987,214,37,"now"],[1,2989,215,8,"this"],[1,2994,215,13,"_info"],[1,3000,215,19,"mostly_blank_count"],[1,3024,217,15,"scrollSpeed"],[1,3026,217,29],[1,3031,217,37,"Math"],[1,3036,217,42,"abs"],[1,3040,217,46,"dOffset"],[1,3043,217,57],[1,3047,218,6,"this"],[1,3052,218,11,"deactivateAndFlush"],[1,3073,220,11,"blankness"],[1,3109,224,4],[1,3116,224,11,"this"],[1,3121,224,16,"_enabled"],[1,3167,228,4,"this"],[1,3172,228,9,"_anyBlankStartTime"],[1,3191,228,30],[1,3196,229,4,"this"],[1,3201,229,9,"_info"],[1,3207,229,17],[1,3211,229,21,"Info"],[1,3213,230,4,"this"],[1,3218,230,9,"_mostlyBlankStartTime"],[1,3240,230,33],[1,3245,231,4,"this"],[1,3250,231,9,"_samplesStartTime"],[1,3268,231,29],[1,3283,235,0,"module"],[1,3285,235,7,"exports"],[1,3293,235,17,"FillRateHelper"]],"functionMap":{"names":["<global>","Info","FillRateHelper","addListener","remove","_listeners.filter$argument_0","setSampleRate","setMinSampleCount","constructor","activate","deactivateAndFlush","_listeners.forEach$argument_0","computeBlankness","enabled","_resetData"],"mappings":"AAA;ACiB;CDW;AEkB;ECQ;cCO;uCCC,iCD;ODC;GDE;EIE;GJE;EKE;GLE;EME;GNI;EOE;GPK;EQE;uBCsC,0BD;GRE;EUE;GV0F;EWE;GXE;EYE;GZK;CFC"}},"type":"js/module"}]}