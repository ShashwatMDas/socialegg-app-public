{"dependencies":[{"name":"./Permissions.types","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.coalesceStatuses = coalesceStatuses;\n  exports.coalesceExpirations = coalesceExpirations;\n  exports.coalesceCanAskAgain = coalesceCanAskAgain;\n  exports.coalesceGranted = coalesceGranted;\n\n  var _Permissions = _$$_REQUIRE(_dependencyMap[0], \"./Permissions.types\");\n\n  function coalesceStatuses(permissions) {\n    var statuses = Object.keys(permissions).map(function (type) {\n      return permissions[type].status;\n    });\n    statuses.sort(function (status1, status2) {\n      return _getStatusWeight(status1) - _getStatusWeight(status2);\n    });\n    return statuses[statuses.length - 1];\n  }\n\n  function _getStatusWeight(status) {\n    switch (status) {\n      case _Permissions.PermissionStatus.GRANTED:\n        return 0;\n\n      case _Permissions.PermissionStatus.DENIED:\n        return 1;\n\n      case _Permissions.PermissionStatus.UNDETERMINED:\n        return 2;\n\n      default:\n        return 100;\n    }\n  }\n\n  function coalesceExpirations(permissions) {\n    var maxExpiration = 9007199254740991;\n    var expirations = Object.keys(permissions).map(function (type) {\n      return permissions[type].expires;\n    });\n    expirations.sort(function (e1, e2) {\n      return (e1 == null || e1 === 'never' ? maxExpiration : e1) - (e2 == null || e2 === 'never' ? maxExpiration : e2);\n    });\n    return expirations[0];\n  }\n\n  function coalesceCanAskAgain(permissions) {\n    return Object.keys(permissions).reduce(function (canAskAgain, type) {\n      return canAskAgain && permissions[type].canAskAgain;\n    }, true);\n  }\n\n  function coalesceGranted(permissions) {\n    return Object.keys(permissions).reduce(function (granted, type) {\n      return granted && permissions[type].granted;\n    }, true);\n  }\n});","lineCount":60,"map":[[10,0,1,0],[12,0,2,7],[12,11,2,16,"coalesceStatuses"],[12,27,2,7],[12,28,2,33,"permissions"],[12,39,2,7],[12,41,2,46],[13,0,3,4],[13,8,3,10,"statuses"],[13,16,3,18],[13,19,3,21,"Object"],[13,25,3,27],[13,26,3,28,"keys"],[13,30,3,21],[13,31,3,33,"permissions"],[13,42,3,21],[13,44,3,46,"map"],[13,47,3,21],[13,48,3,50],[13,58,3,50,"type"],[13,62,3,54],[14,0,3,54],[14,13,3,58,"permissions"],[14,24,3,69],[14,25,3,70,"type"],[14,29,3,69],[14,30,3,58],[14,31,3,76,"status"],[14,37,3,54],[15,0,3,54],[15,5,3,21],[15,6,3,4],[16,0,4,4,"statuses"],[16,4,4,4,"statuses"],[16,12,4,12],[16,13,4,13,"sort"],[16,17,4,4],[16,18,4,18],[16,28,4,19,"status1"],[16,35,4,18],[16,37,4,28,"status2"],[16,44,4,18],[17,0,4,18],[17,13,4,40,"_getStatusWeight"],[17,29,4,56],[17,30,4,57,"status1"],[17,37,4,56],[17,38,4,40],[17,41,4,68,"_getStatusWeight"],[17,57,4,84],[17,58,4,85,"status2"],[17,65,4,84],[17,66,4,18],[18,0,4,18],[18,5,4,4],[19,0,6,4],[19,11,6,11,"statuses"],[19,19,6,19],[19,20,6,20,"statuses"],[19,28,6,28],[19,29,6,29,"length"],[19,35,6,20],[19,38,6,38],[19,39,6,19],[19,40,6,4],[20,0,7,1],[22,0,8,0],[22,11,8,9,"_getStatusWeight"],[22,27,8,0],[22,28,8,26,"status"],[22,34,8,0],[22,36,8,34],[23,0,12,4],[23,12,12,12,"status"],[23,18,12,4],[24,0,13,8],[24,11,13,13,"PermissionStatus"],[24,41,13,30,"GRANTED"],[24,48,13,8],[25,0,14,12],[25,15,14,19],[25,16,14,12],[27,0,15,8],[27,11,15,13,"PermissionStatus"],[27,41,15,30,"DENIED"],[27,47,15,8],[28,0,16,12],[28,15,16,19],[28,16,16,12],[30,0,17,8],[30,11,17,13,"PermissionStatus"],[30,41,17,30,"UNDETERMINED"],[30,53,17,8],[31,0,18,12],[31,15,18,19],[31,16,18,12],[33,0,19,8],[34,0,20,12],[34,15,20,19],[34,18,20,12],[35,0,12,4],[36,0,22,1],[38,0,23,7],[38,11,23,16,"coalesceExpirations"],[38,30,23,7],[38,31,23,36,"permissions"],[38,42,23,7],[38,44,23,49],[39,0,24,4],[39,8,24,10,"maxExpiration"],[39,21,24,23],[39,24,24,26],[39,40,24,4],[40,0,25,4],[40,8,25,10,"expirations"],[40,19,25,21],[40,22,25,24,"Object"],[40,28,25,30],[40,29,25,31,"keys"],[40,33,25,24],[40,34,25,36,"permissions"],[40,45,25,24],[40,47,25,49,"map"],[40,50,25,24],[40,51,25,53],[40,61,25,53,"type"],[40,65,25,57],[41,0,25,57],[41,13,25,61,"permissions"],[41,24,25,72],[41,25,25,73,"type"],[41,29,25,72],[41,30,25,61],[41,31,25,79,"expires"],[41,38,25,57],[42,0,25,57],[42,5,25,24],[42,6,25,4],[43,0,26,4,"expirations"],[43,4,26,4,"expirations"],[43,15,26,15],[43,16,26,16,"sort"],[43,20,26,4],[43,21,26,21],[43,31,26,22,"e1"],[43,33,26,21],[43,35,26,26,"e2"],[43,37,26,21],[44,0,26,21],[44,13,26,33],[44,14,26,34,"e1"],[44,16,26,36],[44,20,26,40],[44,24,26,34],[44,28,26,48,"e1"],[44,30,26,50],[44,35,26,55],[44,42,26,34],[44,45,26,65,"maxExpiration"],[44,58,26,34],[44,61,26,81,"e1"],[44,63,26,33],[44,68,27,9,"e2"],[44,70,27,11],[44,74,27,15],[44,78,27,9],[44,82,27,23,"e2"],[44,84,27,25],[44,89,27,30],[44,96,27,9],[44,99,27,40,"maxExpiration"],[44,112,27,9],[44,115,27,56,"e2"],[44,117,26,33],[44,118,26,21],[45,0,26,21],[45,5,26,4],[46,0,29,4],[46,11,29,11,"expirations"],[46,22,29,22],[46,23,29,23],[46,24,29,22],[46,25,29,4],[47,0,30,1],[49,0,31,7],[49,11,31,16,"coalesceCanAskAgain"],[49,30,31,7],[49,31,31,36,"permissions"],[49,42,31,7],[49,44,31,49],[50,0,32,4],[50,11,32,11,"Object"],[50,17,32,17],[50,18,32,18,"keys"],[50,22,32,11],[50,23,32,23,"permissions"],[50,34,32,11],[50,36,32,36,"reduce"],[50,42,32,11],[50,43,32,43],[50,53,32,44,"canAskAgain"],[50,64,32,43],[50,66,32,57,"type"],[50,70,32,43],[51,0,32,43],[51,13,32,66,"canAskAgain"],[51,24,32,77],[51,28,32,81,"permissions"],[51,39,32,92],[51,40,32,93,"type"],[51,44,32,92],[51,45,32,81],[51,46,32,99,"canAskAgain"],[51,57,32,43],[52,0,32,43],[52,5,32,11],[52,7,32,112],[52,11,32,11],[52,12,32,4],[53,0,33,1],[55,0,34,7],[55,11,34,16,"coalesceGranted"],[55,26,34,7],[55,27,34,32,"permissions"],[55,38,34,7],[55,40,34,45],[56,0,35,4],[56,11,35,11,"Object"],[56,17,35,17],[56,18,35,18,"keys"],[56,22,35,11],[56,23,35,23,"permissions"],[56,34,35,11],[56,36,35,36,"reduce"],[56,42,35,11],[56,43,35,43],[56,53,35,44,"granted"],[56,60,35,43],[56,62,35,53,"type"],[56,66,35,43],[57,0,35,43],[57,13,35,62,"granted"],[57,20,35,69],[57,24,35,73,"permissions"],[57,35,35,84],[57,36,35,85,"type"],[57,40,35,84],[57,41,35,73],[57,42,35,91,"granted"],[57,49,35,43],[58,0,35,43],[58,5,35,11],[58,7,35,100],[58,11,35,11],[58,12,35,4],[59,0,36,1]],"functionMap":{"names":["<global>","coalesceStatuses","Object.keys.map$argument_0","statuses.sort$argument_0","_getStatusWeight","coalesceExpirations","expirations.sort$argument_0","coalesceCanAskAgain","Object.keys.reduce$argument_0","coalesceGranted"],"mappings":"AAA;OCC;kDCC,gCD;kBEC,2EF;CDG;AIC;CJc;OKC;qDHE,iCG;qBCC;2DDC;CLG;OOC;2CCC,mED;CPC;OSC;2CDC,uDC;CTC"}},"type":"js/module"}]}