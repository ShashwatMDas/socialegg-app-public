{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/assertThisInitialized","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"./WebSocketHMRClient","data":{"isAsync":false}},{"name":"./injectUpdate","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var _assertThisInitialized = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/assertThisInitialized\");\n\n  var _inherits = _$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/inherits\");\n\n  var _possibleConstructorReturn = _$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/possibleConstructorReturn\");\n\n  var _getPrototypeOf = _$$_REQUIRE(_dependencyMap[5], \"@babel/runtime/helpers/getPrototypeOf\");\n\n  function _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\n  function _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var WebSocketHMRClient = _$$_REQUIRE(_dependencyMap[6], \"./WebSocketHMRClient\");\n\n  var injectUpdate = _$$_REQUIRE(_dependencyMap[7], \"./injectUpdate\");\n\n  var HMRClient = function (_WebSocketHMRClient) {\n    _inherits(HMRClient, _WebSocketHMRClient);\n\n    var _super = _createSuper(HMRClient);\n\n    function HMRClient(url) {\n      var _this;\n\n      _classCallCheck(this, HMRClient);\n\n      _this = _super.call(this, url);\n\n      _defineProperty(_assertThisInitialized(_this), \"_isEnabled\", false);\n\n      _defineProperty(_assertThisInitialized(_this), \"_pendingUpdate\", null);\n\n      _this.on(\"update\", function (update) {\n        if (_this._isEnabled) {\n          injectUpdate(update);\n        } else if (_this._pendingUpdate == null) {\n          _this._pendingUpdate = update;\n        } else {\n          _this._pendingUpdate = mergeUpdates(_this._pendingUpdate, update);\n        }\n      });\n\n      return _this;\n    }\n\n    _createClass(HMRClient, [{\n      key: \"enable\",\n      value: function enable() {\n        this._isEnabled = true;\n        var update = this._pendingUpdate;\n        this._pendingUpdate = null;\n\n        if (update != null) {\n          injectUpdate(update);\n        }\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        this._isEnabled = false;\n      }\n    }, {\n      key: \"isEnabled\",\n      value: function isEnabled() {\n        return this._isEnabled;\n      }\n    }, {\n      key: \"hasPendingUpdates\",\n      value: function hasPendingUpdates() {\n        return this._pendingUpdate != null;\n      }\n    }]);\n\n    return HMRClient;\n  }(WebSocketHMRClient);\n\n  function mergeUpdates(base, next) {\n    var addedIDs = new Set();\n    var deletedIDs = new Set();\n    var moduleMap = new Map();\n    applyUpdateLocally(base);\n    applyUpdateLocally(next);\n\n    function applyUpdateLocally(update) {\n      update.deleted.forEach(function (id) {\n        if (addedIDs.has(id)) {\n          addedIDs.delete(id);\n        } else {\n          deletedIDs.add(id);\n        }\n\n        moduleMap.delete(id);\n      });\n      update.added.forEach(function (item) {\n        var id = item.module[0];\n\n        if (deletedIDs.has(id)) {\n          deletedIDs.delete(id);\n        } else {\n          addedIDs.add(id);\n        }\n\n        moduleMap.set(id, item);\n      });\n      update.modified.forEach(function (item) {\n        var id = item.module[0];\n        moduleMap.set(id, item);\n      });\n    }\n\n    var result = {\n      isInitialUpdate: next.isInitialUpdate,\n      revisionId: next.revisionId,\n      added: [],\n      modified: [],\n      deleted: []\n    };\n    deletedIDs.forEach(function (id) {\n      result.deleted.push(id);\n    });\n    moduleMap.forEach(function (item, id) {\n      if (deletedIDs.has(id)) {\n        return;\n      }\n\n      if (addedIDs.has(id)) {\n        result.added.push(item);\n      } else {\n        result.modified.push(item);\n      }\n    });\n    return result;\n  }\n\n  module.exports = HMRClient;\n});","lineCount":158,"map":[[2,0,10,0],[20,0,12,0],[20,11,12,9,"_defineProperty"],[20,26,12,0],[20,27,12,25,"obj"],[20,30,12,0],[20,32,12,30,"key"],[20,35,12,0],[20,37,12,35,"value"],[20,42,12,0],[20,44,12,42],[21,0,13,2],[21,8,13,6,"key"],[21,11,13,9],[21,15,13,13,"obj"],[21,18,13,2],[21,20,13,18],[22,0,14,4,"Object"],[22,6,14,4,"Object"],[22,12,14,10],[22,13,14,11,"defineProperty"],[22,27,14,4],[22,28,14,26,"obj"],[22,31,14,4],[22,33,14,31,"key"],[22,36,14,4],[22,38,14,36],[23,0,15,6,"value"],[23,8,15,6,"value"],[23,13,15,11],[23,15,15,13,"value"],[23,20,14,36],[24,0,16,6,"enumerable"],[24,8,16,6,"enumerable"],[24,18,16,16],[24,20,16,18],[24,24,14,36],[25,0,17,6,"configurable"],[25,8,17,6,"configurable"],[25,20,17,18],[25,22,17,20],[25,26,14,36],[26,0,18,6,"writable"],[26,8,18,6,"writable"],[26,16,18,14],[26,18,18,16],[27,0,14,36],[27,7,14,4],[28,0,20,3],[28,5,13,2],[28,11,20,9],[29,0,21,4,"obj"],[29,6,21,4,"obj"],[29,9,21,7],[29,10,21,8,"key"],[29,13,21,7],[29,14,21,4],[29,17,21,15,"value"],[29,22,21,4],[30,0,22,3],[32,0,23,2],[32,11,23,9,"obj"],[32,14,23,2],[33,0,24,1],[35,0,26,0],[35,6,26,6,"WebSocketHMRClient"],[35,24,26,24],[35,27,26,27,"require"],[35,38,26,34],[35,81,26,0],[37,0,28,0],[37,6,28,6,"injectUpdate"],[37,18,28,18],[37,21,28,21,"require"],[37,32,28,28],[37,69,28,0],[39,6,30,6,"HMRClient"],[39,15],[44,0,31,2],[44,23,31,14,"url"],[44,26,31,2],[44,28,31,19],[45,0,31,19],[47,0,31,19],[49,0,32,4],[49,32,32,10,"url"],[49,35,32,4],[51,0,34,4,"_defineProperty"],[51,6,34,4,"_defineProperty"],[51,21,34,19],[51,53,34,26],[51,65,34,19],[51,67,34,40],[51,72,34,19],[51,73,34,4],[53,0,36,4,"_defineProperty"],[53,6,36,4,"_defineProperty"],[53,21,36,19],[53,53,36,26],[53,69,36,19],[53,71,36,44],[53,75,36,19],[53,76,36,4],[55,0,38,4],[55,12,38,9,"on"],[55,14,38,4],[55,15,38,12],[55,23,38,4],[55,25,38,22],[55,35,38,22,"update"],[55,41,38,28],[55,43,38,32],[56,0,39,6],[56,12,39,10],[56,18,39,15,"_isEnabled"],[56,28,39,6],[56,30,39,27],[57,0,40,8,"injectUpdate"],[57,10,40,8,"injectUpdate"],[57,22,40,20],[57,23,40,21,"update"],[57,29,40,20],[57,30,40,8],[58,0,41,7],[58,9,39,6],[58,15,41,13],[58,19,41,17],[58,25,41,22,"_pendingUpdate"],[58,39,41,17],[58,43,41,40],[58,47,41,13],[58,49,41,46],[59,0,42,8],[59,16,42,13,"_pendingUpdate"],[59,30,42,8],[59,33,42,30,"update"],[59,39,42,8],[60,0,43,7],[60,9,41,13],[60,15,43,13],[61,0,44,8],[61,16,44,13,"_pendingUpdate"],[61,30,44,8],[61,33,44,30,"mergeUpdates"],[61,45,44,42],[61,46,44,43],[61,52,44,48,"_pendingUpdate"],[61,66,44,42],[61,68,44,64,"update"],[61,74,44,42],[61,75,44,8],[62,0,45,7],[63,0,46,5],[63,7,38,4],[65,0,31,19],[66,0,47,3],[70,31,49,11],[71,0,50,4],[71,13,50,9,"_isEnabled"],[71,23,50,4],[71,26,50,22],[71,30,50,4],[72,0,51,4],[72,12,51,10,"update"],[72,18,51,16],[72,21,51,19],[72,26,51,24,"_pendingUpdate"],[72,40,51,4],[73,0,52,4],[73,13,52,9,"_pendingUpdate"],[73,27,52,4],[73,30,52,26],[73,34,52,4],[75,0,54,4],[75,12,54,8,"update"],[75,18,54,14],[75,22,54,18],[75,26,54,4],[75,28,54,24],[76,0,55,6,"injectUpdate"],[76,10,55,6,"injectUpdate"],[76,22,55,18],[76,23,55,19,"update"],[76,29,55,18],[76,30,55,6],[77,0,56,5],[78,0,57,3],[81,32,59,12],[82,0,60,4],[82,13,60,9,"_isEnabled"],[82,23,60,4],[82,26,60,22],[82,31,60,4],[83,0,61,3],[86,34,63,14],[87,0,64,4],[87,15,64,11],[87,20,64,16,"_isEnabled"],[87,30,64,4],[88,0,65,3],[91,42,67,22],[92,0,68,4],[92,15,68,11],[92,20,68,16,"_pendingUpdate"],[92,34,68,11],[92,38,68,34],[92,42,68,4],[93,0,69,3],[97,4,30,24,"WebSocketHMRClient"],[97,22],[99,0,72,0],[99,11,72,9,"mergeUpdates"],[99,23,72,0],[99,24,72,22,"base"],[99,28,72,0],[99,30,72,28,"next"],[99,34,72,0],[99,36,72,34],[100,0,73,2],[100,8,73,8,"addedIDs"],[100,16,73,16],[100,19,73,19],[100,23,73,23,"Set"],[100,26,73,19],[100,28,73,2],[101,0,74,2],[101,8,74,8,"deletedIDs"],[101,18,74,18],[101,21,74,21],[101,25,74,25,"Set"],[101,28,74,21],[101,30,74,2],[102,0,75,2],[102,8,75,8,"moduleMap"],[102,17,75,17],[102,20,75,20],[102,24,75,24,"Map"],[102,27,75,20],[102,29,75,2],[103,0,77,2,"applyUpdateLocally"],[103,4,77,2,"applyUpdateLocally"],[103,22,77,20],[103,23,77,21,"base"],[103,27,77,20],[103,28,77,2],[104,0,78,2,"applyUpdateLocally"],[104,4,78,2,"applyUpdateLocally"],[104,22,78,20],[104,23,78,21,"next"],[104,27,78,20],[104,28,78,2],[106,0,80,2],[106,13,80,11,"applyUpdateLocally"],[106,31,80,2],[106,32,80,30,"update"],[106,38,80,2],[106,40,80,38],[107,0,81,4,"update"],[107,6,81,4,"update"],[107,12,81,10],[107,13,81,11,"deleted"],[107,20,81,4],[107,21,81,19,"forEach"],[107,28,81,4],[107,29,81,27],[107,39,81,27,"id"],[107,41,81,29],[107,43,81,33],[108,0,82,6],[108,12,82,10,"addedIDs"],[108,20,82,18],[108,21,82,19,"has"],[108,24,82,10],[108,25,82,23,"id"],[108,27,82,10],[108,28,82,6],[108,30,82,28],[109,0,83,8,"addedIDs"],[109,10,83,8,"addedIDs"],[109,18,83,16],[109,19,83,17,"delete"],[109,25,83,8],[109,26,83,24,"id"],[109,28,83,8],[110,0,84,7],[110,9,82,6],[110,15,84,13],[111,0,85,8,"deletedIDs"],[111,10,85,8,"deletedIDs"],[111,20,85,18],[111,21,85,19,"add"],[111,24,85,8],[111,25,85,23,"id"],[111,27,85,8],[112,0,86,7],[114,0,88,6,"moduleMap"],[114,8,88,6,"moduleMap"],[114,17,88,15],[114,18,88,16,"delete"],[114,24,88,6],[114,25,88,23,"id"],[114,27,88,6],[115,0,89,5],[115,7,81,4],[116,0,90,4,"update"],[116,6,90,4,"update"],[116,12,90,10],[116,13,90,11,"added"],[116,18,90,4],[116,19,90,17,"forEach"],[116,26,90,4],[116,27,90,25],[116,37,90,25,"item"],[116,41,90,29],[116,43,90,33],[117,0,91,6],[117,12,91,12,"id"],[117,14,91,14],[117,17,91,17,"item"],[117,21,91,21],[117,22,91,22,"module"],[117,28,91,17],[117,29,91,29],[117,30,91,17],[117,31,91,6],[119,0,93,6],[119,12,93,10,"deletedIDs"],[119,22,93,20],[119,23,93,21,"has"],[119,26,93,10],[119,27,93,25,"id"],[119,29,93,10],[119,30,93,6],[119,32,93,30],[120,0,94,8,"deletedIDs"],[120,10,94,8,"deletedIDs"],[120,20,94,18],[120,21,94,19,"delete"],[120,27,94,8],[120,28,94,26,"id"],[120,30,94,8],[121,0,95,7],[121,9,93,6],[121,15,95,13],[122,0,96,8,"addedIDs"],[122,10,96,8,"addedIDs"],[122,18,96,16],[122,19,96,17,"add"],[122,22,96,8],[122,23,96,21,"id"],[122,25,96,8],[123,0,97,7],[125,0,99,6,"moduleMap"],[125,8,99,6,"moduleMap"],[125,17,99,15],[125,18,99,16,"set"],[125,21,99,6],[125,22,99,20,"id"],[125,24,99,6],[125,26,99,24,"item"],[125,30,99,6],[126,0,100,5],[126,7,90,4],[127,0,101,4,"update"],[127,6,101,4,"update"],[127,12,101,10],[127,13,101,11,"modified"],[127,21,101,4],[127,22,101,20,"forEach"],[127,29,101,4],[127,30,101,28],[127,40,101,28,"item"],[127,44,101,32],[127,46,101,36],[128,0,102,6],[128,12,102,12,"id"],[128,14,102,14],[128,17,102,17,"item"],[128,21,102,21],[128,22,102,22,"module"],[128,28,102,17],[128,29,102,29],[128,30,102,17],[128,31,102,6],[129,0,103,6,"moduleMap"],[129,8,103,6,"moduleMap"],[129,17,103,15],[129,18,103,16,"set"],[129,21,103,6],[129,22,103,20,"id"],[129,24,103,6],[129,26,103,24,"item"],[129,30,103,6],[130,0,104,5],[130,7,101,4],[131,0,105,3],[133,0,108,2],[133,8,108,8,"result"],[133,14,108,14],[133,17,108,17],[134,0,109,4,"isInitialUpdate"],[134,6,109,4,"isInitialUpdate"],[134,21,109,19],[134,23,109,21,"next"],[134,27,109,25],[134,28,109,26,"isInitialUpdate"],[134,43,108,17],[135,0,110,4,"revisionId"],[135,6,110,4,"revisionId"],[135,16,110,14],[135,18,110,16,"next"],[135,22,110,20],[135,23,110,21,"revisionId"],[135,33,108,17],[136,0,111,4,"added"],[136,6,111,4,"added"],[136,11,111,9],[136,13,111,11],[136,15,108,17],[137,0,112,4,"modified"],[137,6,112,4,"modified"],[137,14,112,12],[137,16,112,14],[137,18,108,17],[138,0,113,4,"deleted"],[138,6,113,4,"deleted"],[138,13,113,11],[138,15,113,13],[139,0,108,17],[139,5,108,2],[140,0,115,2,"deletedIDs"],[140,4,115,2,"deletedIDs"],[140,14,115,12],[140,15,115,13,"forEach"],[140,22,115,2],[140,23,115,21],[140,33,115,21,"id"],[140,35,115,23],[140,37,115,27],[141,0,116,4,"result"],[141,6,116,4,"result"],[141,12,116,10],[141,13,116,11,"deleted"],[141,20,116,4],[141,21,116,19,"push"],[141,25,116,4],[141,26,116,24,"id"],[141,28,116,4],[142,0,117,3],[142,5,115,2],[143,0,118,2,"moduleMap"],[143,4,118,2,"moduleMap"],[143,13,118,11],[143,14,118,12,"forEach"],[143,21,118,2],[143,22,118,20],[143,32,118,21,"item"],[143,36,118,20],[143,38,118,27,"id"],[143,40,118,20],[143,42,118,34],[144,0,119,4],[144,10,119,8,"deletedIDs"],[144,20,119,18],[144,21,119,19,"has"],[144,24,119,8],[144,25,119,23,"id"],[144,27,119,8],[144,28,119,4],[144,30,119,28],[145,0,120,6],[146,0,121,5],[148,0,123,4],[148,10,123,8,"addedIDs"],[148,18,123,16],[148,19,123,17,"has"],[148,22,123,8],[148,23,123,21,"id"],[148,25,123,8],[148,26,123,4],[148,28,123,26],[149,0,124,6,"result"],[149,8,124,6,"result"],[149,14,124,12],[149,15,124,13,"added"],[149,20,124,6],[149,21,124,19,"push"],[149,25,124,6],[149,26,124,24,"item"],[149,30,124,6],[150,0,125,5],[150,7,123,4],[150,13,125,11],[151,0,126,6,"result"],[151,8,126,6,"result"],[151,14,126,12],[151,15,126,13,"modified"],[151,23,126,6],[151,24,126,22,"push"],[151,28,126,6],[151,29,126,27,"item"],[151,33,126,6],[152,0,127,5],[153,0,128,3],[153,5,118,2],[154,0,129,2],[154,11,129,9,"result"],[154,17,129,2],[155,0,130,1],[157,0,132,0,"module"],[157,2,132,0,"module"],[157,8,132,6],[157,9,132,7,"exports"],[157,16,132,0],[157,19,132,17,"HMRClient"],[157,28,132,0]],"functionMap":{"names":["<global>","_defineProperty","HMRClient","constructor","on$argument_1","enable","disable","isEnabled","hasPendingUpdates","mergeUpdates","applyUpdateLocally","update.deleted.forEach$argument_0","update.added.forEach$argument_0","update.modified.forEach$argument_0","deletedIDs.forEach$argument_0","moduleMap.forEach$argument_0"],"mappings":"AAA;ACW;CDY;AEM;ECC;sBCO;KDQ;GDC;EGE;GHQ;EIE;GJE;EKE;GLE;EME;GNE;CFC;ASE;ECQ;2BCC;KDQ;yBEC;KFU;4BGC;KHG;GDC;qBKU;GLE;oBMC;GNU;CTE"}},"type":"js/module"}]}