{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/objectWithoutProperties","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"./NativeWebSocketModule","data":{"isAsync":false}},{"name":"../Blob/Blob","data":{"isAsync":false}},{"name":"../Blob/BlobManager","data":{"isAsync":false}},{"name":"event-target-shim","data":{"isAsync":false}},{"name":"../EventEmitter/NativeEventEmitter","data":{"isAsync":false}},{"name":"../Utilities/Platform","data":{"isAsync":false}},{"name":"./WebSocketEvent","data":{"isAsync":false}},{"name":"base64-js","data":{"isAsync":false}},{"name":"../Utilities/binaryToBase64","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=t(r(d[1])),n=t(r(d[2])),o=t(r(d[3])),c=t(r(d[4])),u=t(r(d[5])),l=t(r(d[6])),f=t(r(d[7]));function h(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}var y=r(d[8]),b=r(d[9]),p=r(d[10]),v=r(d[11]),_=(r(d[12]),r(d[13])),E=r(d[14]),k=r(d[15]),S=r(d[16]),I=0,N=1,w=2,O=3,C=0,L=(function(t){(0,c.default)(T,t);var p,L=(p=T,function(){var t,s=(0,l.default)(p);if(h()){var n=(0,l.default)(this).constructor;t=Reflect.construct(s,arguments,n)}else t=s.apply(this,arguments);return(0,u.default)(this,t)});function T(t,o,c){var u;(0,n.default)(this,T),(u=L.call(this)).CONNECTING=I,u.OPEN=N,u.CLOSING=w,u.CLOSED=O,u.readyState=I,'string'==typeof o&&(o=[o]);var l=c||{},h=l.headers,y=void 0===h?{}:h,b=(0,s.default)(l,[\"headers\"]);return b&&'string'==typeof b.origin&&(console.warn('Specifying `origin` as a WebSocket connection option is deprecated. Include it under `headers` instead.'),y.origin=b.origin,delete b.origin),Object.keys(b).length>0&&console.warn('Unrecognized WebSocket connection option(s) `'+Object.keys(b).join('`, `')+\"`. Did you mean to put these under `headers`?\"),Array.isArray(o)||(o=null),u._eventEmitter=new v(f.default),u._socketId=C++,u._registerEvents(),f.default.connect(t,o,{headers:y},u._socketId),u}return(0,o.default)(T,[{key:\"close\",value:function(t,s){this.readyState!==this.CLOSING&&this.readyState!==this.CLOSED&&(this.readyState=this.CLOSING,this._close(t,s))}},{key:\"send\",value:function(t){if(this.readyState===this.CONNECTING)throw new Error('INVALID_STATE_ERR');if(t instanceof y)return S(b.isAvailable,'Native module BlobModule is required for blob support'),void b.sendOverSocket(t,this._socketId);if('string'!=typeof t){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new Error('Unsupported data type');f.default.sendBinary(k(t),this._socketId)}else f.default.send(t,this._socketId)}},{key:\"ping\",value:function(){if(this.readyState===this.CONNECTING)throw new Error('INVALID_STATE_ERR');f.default.ping(this._socketId)}},{key:\"_close\",value:function(t,s){var n='number'==typeof t?t:1e3,o='string'==typeof s?s:'';f.default.close(n,o,this._socketId),b.isAvailable&&'blob'===this._binaryType&&b.removeWebSocketHandler(this._socketId)}},{key:\"_unregisterEvents\",value:function(){this._subscriptions.forEach(function(t){return t.remove()}),this._subscriptions=[]}},{key:\"_registerEvents\",value:function(){var t=this;this._subscriptions=[this._eventEmitter.addListener('websocketMessage',function(s){if(s.id===t._socketId){var n=s.data;switch(s.type){case'binary':n=E.toByteArray(s.data).buffer;break;case'blob':n=b.createFromOptions(s.data)}t.dispatchEvent(new _('message',{data:n}))}}),this._eventEmitter.addListener('websocketOpen',function(s){s.id===t._socketId&&(t.readyState=t.OPEN,t.protocol=s.protocol,t.dispatchEvent(new _('open')))}),this._eventEmitter.addListener('websocketClosed',function(s){s.id===t._socketId&&(t.readyState=t.CLOSED,t.dispatchEvent(new _('close',{code:s.code,reason:s.reason})),t._unregisterEvents(),t.close())}),this._eventEmitter.addListener('websocketFailed',function(s){s.id===t._socketId&&(t.readyState=t.CLOSED,t.dispatchEvent(new _('error',{message:s.message})),t.dispatchEvent(new _('close',{message:s.message})),t._unregisterEvents(),t.close())})]}},{key:\"binaryType\",get:function(){return this._binaryType},set:function(t){if('blob'!==t&&'arraybuffer'!==t)throw new Error(\"binaryType must be either 'blob' or 'arraybuffer'\");'blob'!==this._binaryType&&'blob'!==t||(S(b.isAvailable,'Native module BlobModule is required for blob support'),'blob'===t?b.addWebSocketHandler(this._socketId):b.removeWebSocketHandler(this._socketId)),this._binaryType=t}}]),T})(p.apply(void 0,['close','error','message','open']));L.CONNECTING=I,L.OPEN=N,L.CLOSING=w,L.CLOSED=O,m.exports=L});","lineCount":1,"map":[[1,28,11,0],[1,133,25,0,"_NativeWebSocketModule"],[1,135,25,0,"_interopRequireDefault"],[1,137,25,0,"r"],[1,139,25,0,"d"],[1,141,25,0],[1,394,13,0],[1,398,13,6,"Blob"],[1,400,13,13,"require"],[1,402,13,20,"d"],[1,404,13,20],[1,408,14,6,"BlobManager"],[1,410,14,20,"require"],[1,412,14,27,"d"],[1,414,14,27],[1,418,15,6,"EventTarget"],[1,420,15,20,"require"],[1,422,15,27,"d"],[1,424,15,27],[1,429,16,6,"NativeEventEmitter"],[1,431,16,27,"require"],[1,433,16,34,"d"],[1,435,16,34],[1,440,18,6,"WebSocketEvent"],[1,443,17,17,"require"],[1,445,17,24,"d"],[1,447,17,24],[1,452,18,23,"require"],[1,454,18,30,"d"],[1,456,18,30],[1,462,20,6,"base64"],[1,464,20,15,"require"],[1,466,20,22,"d"],[1,468,20,22],[1,473,21,6,"binaryToBase64"],[1,475,21,23,"require"],[1,477,21,30,"d"],[1,479,21,30],[1,484,22,6,"invariant"],[1,486,22,18,"require"],[1,488,22,25,"d"],[1,490,22,25],[1,495,41,6,"CONNECTING"],[1,497,41,19],[1,499,42,6,"OPEN"],[1,501,42,13],[1,503,43,6,"CLOSING"],[1,505,43,16],[1,507,44,6,"CLOSED"],[1,509,44,15],[1,511,50,4,"nextWebSocketId"],[1,513,50,22],[1,515,58,6,"WebSocket"],[1,740,85,2],[1,749,85,2,"WebSocket"],[1,751,86,4,"url"],[1,753,87,4,"protocols"],[1,755,88,4,"options"],[1,758,89,4],[1,762,89,4,"_this"],[1,765,89,4],[1,767,89,4,"_classCallCheck2"],[1,769,89,4,"default"],[1,778,89,4,"this"],[1,783,89,4,"WebSocket"],[1,787,90,4,"_this"],[1,789,90,4,"_super"],[1,791,90,4,"call"],[1,796,90,4,"this"],[1,803,64,2,"CONNECTING"],[1,814,64,23,"CONNECTING"],[1,816,89,4,"_this"],[1,818,65,2,"OPEN"],[1,823,65,17,"OPEN"],[1,825,89,4,"_this"],[1,827,66,2,"CLOSING"],[1,835,66,20,"CLOSING"],[1,837,89,4,"_this"],[1,839,67,2,"CLOSED"],[1,846,67,19,"CLOSED"],[1,848,89,4,"_this"],[1,850,82,2,"readyState"],[1,861,82,23,"CONNECTING"],[1,863,91,29],[1,880,91,15,"protocols"],[1,884,92,6,"protocols"],[1,887,92,19,"protocols"],[1,891,89,4],[1,895,89,4,"_ref2"],[1,897,95,44,"options"],[1,903,89,4,"_ref2$headers"],[1,905,89,4,"_ref2"],[1,907,95,11,"headers"],[1,915,95,11,"headers"],[1,922,89,4,"undefined"],[1,926,89,4,"_ref2$headers"],[1,931,89,4,"_ref2$headers"],[1,933,95,28,"unrecognized"],[1,936,89,4],[1,938,89,4,"_objectWithoutProperties2"],[1,940,89,4,"default"],[1,949,89,4,"_ref2"],[1,952,89,4],[1,964,89,4],[1,971,101,8,"unrecognized"],[1,974,101,55],[1,991,101,31,"unrecognized"],[1,993,101,44,"origin"],[1,1002,102,6,"console"],[1,1010,102,14,"warn"],[1,1015,103,8],[1,1122,108,6,"headers"],[1,1124,108,14,"origin"],[1,1131,108,23,"unrecognized"],[1,1133,108,36,"origin"],[1,1147,112,13,"unrecognized"],[1,1149,112,26,"origin"],[1,1157,116,8,"Object"],[1,1164,116,15,"keys"],[1,1169,116,20,"unrecognized"],[1,1172,116,34,"length"],[1,1179,116,43],[1,1182,117,6,"console"],[1,1190,117,14,"warn"],[1,1195,118,8],[1,1243,119,10,"Object"],[1,1250,119,17,"keys"],[1,1255,119,22,"unrecognized"],[1,1258,119,36,"join"],[1,1263,119,41],[1,1271,120,10],[1,1320,125,9,"Array"],[1,1326,125,15,"isArray"],[1,1334,125,23,"protocols"],[1,1339,126,6,"protocols"],[1,1341,126,18],[1,1347,129,4,"_this"],[1,1349,129,9,"_eventEmitter"],[1,1363,129,25],[1,1367,129,29,"NativeEventEmitter"],[1,1369,129,48,"NativeWebSocketModule"],[1,1371,129,48,"NativeWebSocketModule"],[1,1380,130,4,"_this"],[1,1382,130,9,"_socketId"],[1,1392,130,21,"nextWebSocketId"],[1,1396,131,4,"_this"],[1,1398,131,9,"_registerEvents"],[1,1416,132,4,"NativeWebSocketModule"],[1,1418,132,4,"NativeWebSocketModule"],[1,1426,132,26,"connect"],[1,1434,132,34,"url"],[1,1436,132,39,"protocols"],[1,1439,132,51,"headers"],[1,1447,132,51,"headers"],[1,1450,132,61,"_this"],[1,1452,132,66,"_socketId"],[1,1463,89,4,"_this"],[1,1516,157,8,"code"],[1,1518,157,23,"reason"],[1,1521,158,8,"this"],[1,1526,158,13,"readyState"],[1,1539,158,28,"this"],[1,1544,158,33,"CLOSING"],[1,1553,158,44,"this"],[1,1558,158,49,"readyState"],[1,1571,158,64,"this"],[1,1576,158,69,"CLOSED"],[1,1585,162,4,"this"],[1,1590,162,9,"readyState"],[1,1601,162,22,"this"],[1,1606,162,27,"CLOSING"],[1,1614,163,4,"this"],[1,1619,163,9,"_close"],[1,1626,163,16,"code"],[1,1628,163,22,"reason"],[1,1661,166,7,"data"],[1,1664,167,4],[1,1667,167,8,"this"],[1,1672,167,13,"readyState"],[1,1685,167,28,"this"],[1,1690,167,33,"CONNECTING"],[1,1701,168,6],[1,1707,168,12],[1,1711,168,16,"Error"],[1,1717,168,22],[1,1738,171,4],[1,1741,171,8,"data"],[1,1754,171,24,"Blob"],[1,1756,177,6],[1,1763,172,6,"invariant"],[1,1765,173,8,"BlobManager"],[1,1767,173,20,"isAvailable"],[1,1779,174,8],[1,1841,176,6,"BlobManager"],[1,1843,176,18,"sendOverSocket"],[1,1858,176,33,"data"],[1,1860,176,39,"this"],[1,1865,176,44,"_socketId"],[1,1876,180,4],[1,1879,180,24],[1,1896,180,15,"data"],[1,1898,180,4],[1,1899,185,4],[1,1904,185,8,"data"],[1,1917,185,24,"ArrayBuffer"],[1,1930,185,39,"ArrayBuffer"],[1,1942,185,51,"isView"],[1,1949,185,58,"data"],[1,1953,190,4],[1,1959,190,10],[1,1963,190,14,"Error"],[1,1969,190,20],[1,1994,186,6,"NativeWebSocketModule"],[1,1996,186,6,"NativeWebSocketModule"],[1,2004,186,28,"sendBinary"],[1,2015,186,39,"binaryToBase64"],[1,2017,186,54,"data"],[1,2020,186,61,"this"],[1,2025,186,66,"_socketId"],[1,2041,181,6,"NativeWebSocketModule"],[1,2043,181,6,"NativeWebSocketModule"],[1,2051,181,28,"send"],[1,2056,181,33,"data"],[1,2058,181,39,"this"],[1,2063,181,44,"_socketId"],[1,2105,194,4],[1,2108,194,8,"this"],[1,2113,194,13,"readyState"],[1,2126,194,28,"this"],[1,2131,194,33,"CONNECTING"],[1,2142,195,6],[1,2148,195,12],[1,2152,195,16,"Error"],[1,2158,195,22],[1,2179,198,4,"NativeWebSocketModule"],[1,2181,198,4,"NativeWebSocketModule"],[1,2189,198,26,"ping"],[1,2194,198,31,"this"],[1,2199,198,36,"_socketId"],[1,2241,201,9,"code"],[1,2243,201,24,"reason"],[1,2246,203,4],[1,2250,203,10,"statusCode"],[1,2252,203,39],[1,2269,203,30,"code"],[1,2271,203,50,"code"],[1,2273,46,21],[1,2277,204,10,"closeReason"],[1,2279,204,42],[1,2296,204,31,"reason"],[1,2298,204,53,"reason"],[1,2300,204,62],[1,2303,205,4,"NativeWebSocketModule"],[1,2305,205,4,"NativeWebSocketModule"],[1,2313,205,26,"close"],[1,2319,205,32,"statusCode"],[1,2321,205,44,"closeReason"],[1,2323,205,57,"this"],[1,2328,205,62,"_socketId"],[1,2339,207,8,"BlobManager"],[1,2341,207,20,"isAvailable"],[1,2354,207,56],[1,2363,207,35,"this"],[1,2368,207,40,"_binaryType"],[1,2381,208,6,"BlobManager"],[1,2383,208,18,"removeWebSocketHandler"],[1,2406,208,41,"this"],[1,2411,208,46,"_socketId"],[1,2466,213,4,"this"],[1,2471,213,9,"_subscriptions"],[1,2486,213,24,"forEach"],[1,2494,213,32],[1,2503,213,32,"e"],[1,2506,213,33],[1,2513,213,37,"e"],[1,2515,213,39,"remove"],[1,2526,214,4,"this"],[1,2531,214,9,"_subscriptions"],[1,2591,217,26],[1,2595,217,26,"_this2"],[1,2597,217,26,"this"],[1,2602,218,4,"this"],[1,2607,218,9,"_subscriptions"],[1,2623,219,6,"this"],[1,2628,219,11,"_eventEmitter"],[1,2642,219,25,"addListener"],[1,2654,219,37],[1,2673,219,57],[1,2682,219,57,"ev"],[1,2685,220,8],[1,2688,220,12,"ev"],[1,2690,220,15,"id"],[1,2695,220,22,"_this2"],[1,2697,220,27,"_socketId"],[1,2707,220,8],[1,2708,223,8],[1,2712,223,12,"data"],[1,2714,223,19,"ev"],[1,2716,223,22,"data"],[1,2721,224,8],[1,2728,224,16,"ev"],[1,2730,224,19,"type"],[1,2736,225,10],[1,2740,225,15],[1,2749,226,12,"data"],[1,2751,226,19,"base64"],[1,2753,226,26,"toByteArray"],[1,2765,226,38,"ev"],[1,2767,226,41,"data"],[1,2773,226,47,"buffer"],[1,2780,227,12],[1,2786,228,10],[1,2790,228,15],[1,2797,229,12,"data"],[1,2799,229,19,"BlobManager"],[1,2801,229,31,"createFromOptions"],[1,2819,229,49,"ev"],[1,2821,229,52,"data"],[1,2827,232,8,"_this2"],[1,2829,232,13,"dispatchEvent"],[1,2843,232,27],[1,2847,232,31,"WebSocketEvent"],[1,2849,232,46],[1,2860,232,58,"data"],[1,2865,232,58,"data"],[1,2873,234,6,"this"],[1,2878,234,11,"_eventEmitter"],[1,2892,234,25,"addListener"],[1,2904,234,37],[1,2920,234,54],[1,2929,234,54,"ev"],[1,2932,235,12,"ev"],[1,2934,235,15,"id"],[1,2939,235,22,"_this2"],[1,2941,235,27,"_socketId"],[1,2953,238,8,"_this2"],[1,2955,238,13,"readyState"],[1,2966,238,26,"_this2"],[1,2968,238,31,"OPEN"],[1,2973,239,8,"_this2"],[1,2975,239,13,"protocol"],[1,2984,239,24,"ev"],[1,2986,239,27,"protocol"],[1,2995,240,8,"_this2"],[1,2997,240,13,"dispatchEvent"],[1,3011,240,27],[1,3015,240,31,"WebSocketEvent"],[1,3017,240,46],[1,3029,242,6,"this"],[1,3034,242,11,"_eventEmitter"],[1,3048,242,25,"addListener"],[1,3060,242,37],[1,3078,242,56],[1,3087,242,56,"ev"],[1,3090,243,12,"ev"],[1,3092,243,15,"id"],[1,3097,243,22,"_this2"],[1,3099,243,27,"_socketId"],[1,3111,246,8,"_this2"],[1,3113,246,13,"readyState"],[1,3124,246,26,"_this2"],[1,3126,246,31,"CLOSED"],[1,3133,247,8,"_this2"],[1,3135,247,13,"dispatchEvent"],[1,3149,248,10],[1,3153,248,14,"WebSocketEvent"],[1,3155,248,29],[1,3164,249,12,"code"],[1,3169,249,18,"ev"],[1,3171,249,21,"code"],[1,3176,250,12,"reason"],[1,3183,250,20,"ev"],[1,3185,250,23,"reason"],[1,3195,253,8,"_this2"],[1,3197,253,13,"_unregisterEvents"],[1,3217,254,8,"_this2"],[1,3219,254,13,"close"],[1,3230,256,6,"this"],[1,3235,256,11,"_eventEmitter"],[1,3249,256,25,"addListener"],[1,3261,256,37],[1,3279,256,56],[1,3288,256,56,"ev"],[1,3291,257,12,"ev"],[1,3293,257,15,"id"],[1,3298,257,22,"_this2"],[1,3300,257,27,"_socketId"],[1,3312,260,8,"_this2"],[1,3314,260,13,"readyState"],[1,3325,260,26,"_this2"],[1,3327,260,31,"CLOSED"],[1,3334,261,8,"_this2"],[1,3336,261,13,"dispatchEvent"],[1,3350,262,10],[1,3354,262,14,"WebSocketEvent"],[1,3356,262,29],[1,3365,263,12,"message"],[1,3373,263,21,"ev"],[1,3375,263,24,"message"],[1,3386,266,8,"_this2"],[1,3388,266,13,"dispatchEvent"],[1,3402,267,10],[1,3406,267,14,"WebSocketEvent"],[1,3408,267,29],[1,3417,268,12,"message"],[1,3425,268,21,"ev"],[1,3427,268,24,"message"],[1,3438,271,8,"_this2"],[1,3440,271,13,"_unregisterEvents"],[1,3460,272,8,"_this2"],[1,3462,272,13,"close"],[1,3509,136,4],[1,3516,136,11,"this"],[1,3521,136,16,"_binaryType"],[1,3547,139,17,"binaryType"],[1,3550,140,4],[1,3553,140,23],[1,3562,140,8,"binaryType"],[1,3565,140,48],[1,3581,140,33,"binaryType"],[1,3583,141,6],[1,3589,141,12],[1,3593,141,16,"Error"],[1,3599,141,22],[1,3652,143,29],[1,3661,143,8,"this"],[1,3666,143,13,"_binaryType"],[1,3679,143,54],[1,3688,143,39,"binaryType"],[1,3692,144,6,"invariant"],[1,3694,145,8,"BlobManager"],[1,3696,145,20,"isAvailable"],[1,3708,146,8],[1,3765,148,25],[1,3774,148,10,"binaryType"],[1,3776,149,8,"BlobManager"],[1,3778,149,20,"addWebSocketHandler"],[1,3798,149,40,"this"],[1,3803,149,45,"_socketId"],[1,3814,151,8,"BlobManager"],[1,3816,151,20,"removeWebSocketHandler"],[1,3839,151,43,"this"],[1,3844,151,48,"_socketId"],[1,3856,154,4,"this"],[1,3861,154,9,"_binaryType"],[1,3873,154,23,"binaryType"],[1,3883,58,25,"EventTarget"],[1,3885,58,36,"apply"],[1,3896,58,25,"undefined"],[1,3899,48,26],[1,3907,48,35],[1,3915,48,44],[1,3925,48,55],[1,3935,58,6,"WebSocket"],[1,3937,59,9,"CONNECTING"],[1,3948,59,30,"CONNECTING"],[1,3950,58,6,"WebSocket"],[1,3952,60,9,"OPEN"],[1,3957,60,24,"OPEN"],[1,3959,58,6,"WebSocket"],[1,3961,61,9,"CLOSING"],[1,3969,61,27,"CLOSING"],[1,3971,58,6,"WebSocket"],[1,3973,62,9,"CLOSED"],[1,3980,62,26,"CLOSED"],[1,3982,278,0,"module"],[1,3984,278,7,"exports"],[1,3992,278,17,"WebSocket"]],"functionMap":{"names":["<global>","WebSocket","constructor","get__binaryType","set__binaryType","close","send","ping","_close","_unregisterEvents","_subscriptions.forEach$argument_0","_registerEvents","_eventEmitter.addListener$argument_1"],"mappings":"AAA;ACyD;EC2B;GDgD;EEE;GFE;EGE;GHgB;EIE;GJO;EKE;GLyB;EME;GNM;EOE;GPS;EQE;gCCC,eD;GRE;EUE;yDCE;ODc;sDCC;ODO;wDCC;ODa;wDCC;ODiB;GVE;CDC"}},"type":"js/module"}]}