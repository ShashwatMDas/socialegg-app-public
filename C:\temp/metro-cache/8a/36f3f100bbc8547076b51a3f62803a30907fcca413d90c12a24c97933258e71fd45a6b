{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function c(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function l(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?c(Object(s),!0).forEach(function(o){t(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))})}return n}function u(t){var n=0;if(\"undefined\"==typeof Symbol||null==t[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]){if(Array.isArray(t)||(t=f(t)))return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}return(n=t[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]()).next.bind(n)}function f(t,n){if(t){if(\"string\"==typeof t)return h(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===o&&t.constructor&&(o=t.constructor.name),\"Map\"===o||\"Set\"===o?Array.from(o):\"Arguments\"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h(t,n):void 0}}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=t[o];return s}var v=r(d[4]),b=(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};o(this,t),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=n}return s(t,[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,o,s,c){var l=this._config,u=l.itemVisiblePercentThreshold,f=l.viewAreaCoveragePercentThreshold,h=null!=f,b=h?f:u;v(null!=b&&null!=u!=(null!=f),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var p=[];if(0===t)return p;var w=-1,_=c||{first:0,last:t-1},I=_.first,O=_.last;if(O>=t)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:c,itemCount:t})),[];for(var S=I;S<=O;S++){var j=s(S);if(j){var P=j.offset-n,A=P+j.length;if(P<o&&A>0)w=S,y(h,b,P,A,o,j.length)&&p.push(S);else if(w>=0)break}}return p}},{key:\"onUpdate\",value:function(t,n,o,s,c,l,u){var f=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==t&&s(0)){var h=[];if(t&&(h=this.computeViewableItems(t,n,o,s,u)),this._viewableIndices.length!==h.length||!this._viewableIndices.every(function(t,n){return t===h[n]}))if(this._viewableIndices=h,this._config.minimumViewTime){var v=setTimeout(function(){f._timers.delete(v),f._onUpdateSync(h,l,c)},this._config.minimumViewTime);this._timers.add(v)}else this._onUpdateSync(h,l,c)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(t,o,s){var c=this;t=t.filter(function(t){return c._viewableIndices.includes(t)});for(var f,h=this._viewableItems,v=new Map(t.map(function(t){var n=s(t,!0);return[n.key,n]})),b=[],y=u(v);!(f=y()).done;){var p=f.value,w=n(p,2),_=w[0],I=w[1];h.has(_)||b.push(I)}for(var O,S=u(h);!(O=S()).done;){var j=O.value,P=n(j,2),A=P[0],T=P[1];v.has(A)||b.push(l({},T,{isViewable:!1}))}b.length>0&&(this._viewableItems=v,o({viewableItems:Array.from(v.values()),changed:b,viewabilityConfig:this._config}))}}]),t})();function y(t,n,o,s,c,l){if(w(o,s,c))return!0;var u=p(o,s,c);return 100*(t?u/c:u/l)>=n}function p(t,n,o){var s=Math.min(n,o)-Math.max(t,0);return Math.max(0,s)}function w(t,n,o){return t>=0&&n<=o&&n>t}m.exports=b});","lineCount":1,"map":[[1,28,10,0],[1,1505,12,0],[1,1509,12,6,"invariant"],[1,1511,12,18,"require"],[1,1513,12,25,"d"],[1,1515,12,25],[1,1519,71,6,"ViewabilityHelper"],[1,1533,81,2],[1,1542,81,2,"ViewabilityHelper"],[1,1546,83,4],[1,1550,82,4,"config"],[1,1552,83,4,"arguments"],[1,1562,83,4,"length"],[1,1569,83,4],[1,1577,83,4,"undefined"],[1,1581,83,4,"arguments"],[1,1591,83,4],[1,1594,83,4,"arguments"],[1,1604,83,4],[1,1608,82,33,"viewAreaCoveragePercentThreshold"],[1,1641,82,67],[1,1644,83,4,"_classCallCheck"],[1,1646,83,4,"this"],[1,1651,83,4,"ViewabilityHelper"],[1,1654,83,4,"this"],[1,1659,73,2,"_hasInteracted"],[1,1675,73,28],[1,1677,83,4,"this"],[1,1682,77,2,"_timers"],[1,1690,77,25],[1,1694,77,29,"Set"],[1,1698,83,4,"this"],[1,1703,78,2,"_viewableIndices"],[1,1723,83,4,"this"],[1,1728,79,2,"_viewableItems"],[1,1743,79,43],[1,1747,79,47,"Map"],[1,1751,84,4,"this"],[1,1756,84,9,"_config"],[1,1764,84,19,"config"],[1,1810,91,4,"this"],[1,1815,91,9,"_timers"],[1,1823,91,17,"forEach"],[1,1831,91,25,"clearTimeout"],[1,1890,98,4,"itemCount"],[1,1892,99,4,"scrollOffset"],[1,1894,100,4,"viewportHeight"],[1,1896,101,4,"getFrameMetrics"],[1,1898,102,4,"renderRange"],[1,1901,103,19],[1,1905,103,19,"_this$_config"],[1,1907,107,8,"this"],[1,1912,107,13,"_config"],[1,1920,105,6,"itemVisiblePercentThreshold"],[1,1922,103,19,"_this$_config"],[1,1924,105,6,"itemVisiblePercentThreshold"],[1,1952,106,6,"viewAreaCoveragePercentThreshold"],[1,1954,103,19,"_this$_config"],[1,1956,106,6,"viewAreaCoveragePercentThreshold"],[1,1989,108,10,"viewAreaMode"],[1,1991,108,61],[1,1997,108,25,"viewAreaCoveragePercentThreshold"],[1,1999,109,10,"viewablePercentThreshold"],[1,2001,109,37,"viewAreaMode"],[1,2003,110,8,"viewAreaCoveragePercentThreshold"],[1,2005,111,8,"itemVisiblePercentThreshold"],[1,2007,112,4,"invariant"],[1,2009,113,34],[1,2015,113,6,"viewablePercentThreshold"],[1,2018,114,40],[1,2024,114,9,"itemVisiblePercentThreshold"],[1,2028,115,47],[1,2034,115,11,"viewAreaCoveragePercentThreshold"],[1,2037,116,6],[1,2128,118,4],[1,2132,118,10,"viewableIndices"],[1,2137,119,4],[1,2140,119,22],[1,2144,119,8,"itemCount"],[1,2146,120,6],[1,2153,120,13,"viewableIndices"],[1,2155,122,4],[1,2159,122,8,"firstVisible"],[1,2162,122,20],[1,2164,103,19,"_ref"],[1,2166,123,26,"renderRange"],[1,2170,123,42,"first"],[1,2176,123,49],[1,2178,123,52,"last"],[1,2183,123,58,"itemCount"],[1,2185,123,70],[1,2188,123,11,"first"],[1,2190,103,19,"_ref"],[1,2192,123,11,"first"],[1,2198,123,18,"last"],[1,2200,103,19,"_ref"],[1,2202,123,18,"last"],[1,2207,124,4],[1,2210,124,8,"last"],[1,2213,124,16,"itemCount"],[1,2215,129,6],[1,2222,125,6,"console"],[1,2230,125,14,"warn"],[1,2235,126,8],[1,2281,127,10,"JSON"],[1,2286,127,15,"stringify"],[1,2297,127,26,"renderRange"],[1,2309,127,26,"renderRange"],[1,2311,127,39,"itemCount"],[1,2321,127,39,"itemCount"],[1,2329,131,4],[1,2333,131,9],[1,2337,131,13,"idx"],[1,2339,131,19,"first"],[1,2341,131,26,"idx"],[1,2344,131,33,"last"],[1,2346,131,39,"idx"],[1,2350,131,46],[1,2351,132,6],[1,2355,132,12,"metrics"],[1,2357,132,22,"getFrameMetrics"],[1,2359,132,38,"idx"],[1,2362,133,6],[1,2365,133,11,"metrics"],[1,2367,133,6],[1,2368,136,6],[1,2372,136,12,"top"],[1,2374,136,18,"metrics"],[1,2376,136,26,"offset"],[1,2383,136,35,"scrollOffset"],[1,2385,137,12,"bottom"],[1,2387,137,21,"top"],[1,2389,137,27,"metrics"],[1,2391,137,35,"length"],[1,2398,138,6],[1,2401,138,10,"top"],[1,2403,138,16,"viewportHeight"],[1,2406,138,34,"bottom"],[1,2408,138,43],[1,2410,139,8,"firstVisible"],[1,2412,139,23,"idx"],[1,2414,141,10,"_isViewable"],[1,2416,142,12,"viewAreaMode"],[1,2418,143,12,"viewablePercentThreshold"],[1,2420,144,12,"top"],[1,2422,145,12,"bottom"],[1,2424,146,12,"viewportHeight"],[1,2426,147,12,"metrics"],[1,2428,147,20,"length"],[1,2437,150,10,"viewableIndices"],[1,2439,150,26,"push"],[1,2444,150,31,"idx"],[1,2452,152,13],[1,2455,152,17,"firstVisible"],[1,2458,152,33],[1,2460,153,8],[1,2467,156,4],[1,2474,156,11,"viewableIndices"],[1,2509,164,4,"itemCount"],[1,2511,165,4,"scrollOffset"],[1,2513,166,4,"viewportHeight"],[1,2515,167,4,"getFrameMetrics"],[1,2517,168,4,"createViewToken"],[1,2519,169,4,"onViewableItemsChanged"],[1,2521,173,4,"renderRange"],[1,2524,174,10],[1,2528,174,10,"_this"],[1,2530,174,10,"this"],[1,2535,175,4],[1,2540,176,7,"this"],[1,2545,176,12,"_config"],[1,2553,176,20,"waitForInteraction"],[1,2573,176,43,"this"],[1,2578,176,48,"_hasInteracted"],[1,2595,177,20],[1,2599,177,6,"itemCount"],[1,2602,178,7,"getFrameMetrics"],[1,2604,178,23],[1,2607,175,4],[1,2608,182,4],[1,2612,182,8,"viewableIndices"],[1,2617,192,4],[1,2620,183,8,"itemCount"],[1,2624,184,6,"viewableIndices"],[1,2626,184,24,"this"],[1,2631,184,29,"computeViewableItems"],[1,2652,185,8,"itemCount"],[1,2654,186,8,"scrollOffset"],[1,2656,187,8,"viewportHeight"],[1,2658,188,8,"getFrameMetrics"],[1,2660,189,8,"renderRange"],[1,2664,193,6,"this"],[1,2669,193,11,"_viewableIndices"],[1,2686,193,28,"length"],[1,2695,193,39,"viewableIndices"],[1,2697,193,55,"length"],[1,2706,194,6,"this"],[1,2711,194,11,"_viewableIndices"],[1,2728,194,28,"every"],[1,2734,194,34],[1,2743,194,35,"v"],[1,2745,194,38,"ii"],[1,2748,194,34],[1,2755,194,45,"v"],[1,2759,194,51,"viewableIndices"],[1,2761,194,67,"ii"],[1,2766,201,4],[1,2769,200,4,"this"],[1,2774,200,9,"_viewableIndices"],[1,2791,200,28,"viewableIndices"],[1,2793,201,8,"this"],[1,2798,201,13,"_config"],[1,2806,201,21,"minimumViewTime"],[1,2822,201,38],[1,2823,202,6],[1,2827,202,12,"handle"],[1,2829,202,21,"setTimeout"],[1,2840,202,32],[1,2851,203,8,"_this"],[1,2853,203,13,"_timers"],[1,2861,203,21,"delete"],[1,2868,203,28,"handle"],[1,2871,204,8,"_this"],[1,2873,204,13,"_onUpdateSync"],[1,2887,205,10,"viewableIndices"],[1,2889,206,10,"onViewableItemsChanged"],[1,2891,207,10,"createViewToken"],[1,2895,209,9,"this"],[1,2900,209,14,"_config"],[1,2908,209,22,"minimumViewTime"],[1,2925,210,6,"this"],[1,2930,210,11,"_timers"],[1,2938,210,19,"add"],[1,2942,210,23,"handle"],[1,2950,212,6,"this"],[1,2955,212,11,"_onUpdateSync"],[1,2969,213,8,"viewableIndices"],[1,2971,214,8,"onViewableItemsChanged"],[1,2973,215,8,"createViewToken"],[1,3024,224,4,"this"],[1,3029,224,9,"_viewableIndices"],[1,3093,231,4,"this"],[1,3098,231,9,"_hasInteracted"],[1,3114,231,26],[1,3154,235,4,"viewableIndicesToCheck"],[1,3156,236,4,"onViewableItemsChanged"],[1,3158,237,4,"createViewToken"],[1,3161,238,4],[1,3165,238,4,"_this2"],[1,3167,238,4,"this"],[1,3172,240,4,"viewableIndicesToCheck"],[1,3174,240,29,"viewableIndicesToCheck"],[1,3176,240,52,"filter"],[1,3183,240,59],[1,3192,240,59,"ii"],[1,3195,240,61],[1,3202,241,6,"_this2"],[1,3204,241,11,"_viewableIndices"],[1,3221,241,28,"includes"],[1,3230,241,37,"ii"],[1,3235,252,4],[1,3239,243,4],[1,3243,252,4,"_step"],[1,3245,243,10,"prevItems"],[1,3247,243,22,"this"],[1,3252,243,27,"_viewableItems"],[1,3267,244,10,"nextItems"],[1,3269,244,22],[1,3273,244,26,"Map"],[1,3277,245,6,"viewableIndicesToCheck"],[1,3279,245,29,"map"],[1,3283,245,33],[1,3292,245,33,"ii"],[1,3295,246,8],[1,3299,246,14,"viewable"],[1,3301,246,25,"createViewToken"],[1,3303,246,41,"ii"],[1,3306,246,45],[1,3309,247,8],[1,3316,247,16,"viewable"],[1,3318,247,25,"key"],[1,3322,247,30,"viewable"],[1,3328,251,10,"changed"],[1,3333,252,4,"_iterator"],[1,3335,252,4,"_createForOfIteratorHelperLoose"],[1,3337,252,34,"nextItems"],[1,3342,252,4,"_step"],[1,3344,252,4,"_iterator"],[1,3349,252,4,"done"],[1,3355,252,45],[1,3356,252,45],[1,3360,252,45,"_ref2"],[1,3362,252,45,"_step"],[1,3364,252,45,"value"],[1,3370,252,45,"_ref3"],[1,3372,252,45,"_slicedToArray"],[1,3374,252,45,"_ref2"],[1,3376,252,45],[1,3379,252,16,"key"],[1,3381,252,45,"_ref3"],[1,3383,252,45],[1,3386,252,21,"viewable"],[1,3388,252,45,"_ref3"],[1,3390,252,45],[1,3393,253,11,"prevItems"],[1,3395,253,21,"has"],[1,3399,253,25,"key"],[1,3403,254,8,"changed"],[1,3405,254,16,"push"],[1,3410,254,21,"viewable"],[1,3413,257,4],[1,3417,257,4],[1,3421,257,4,"_step2"],[1,3423,257,4,"_iterator2"],[1,3425,257,4,"_createForOfIteratorHelperLoose"],[1,3427,257,34,"prevItems"],[1,3432,257,4,"_step2"],[1,3434,257,4,"_iterator2"],[1,3439,257,4,"done"],[1,3445,257,45],[1,3446,257,45],[1,3450,257,45,"_ref4"],[1,3452,257,45,"_step2"],[1,3454,257,45,"value"],[1,3460,257,45,"_ref5"],[1,3462,257,45,"_slicedToArray"],[1,3464,257,45,"_ref4"],[1,3466,257,45],[1,3469,257,16,"key"],[1,3471,257,45,"_ref5"],[1,3473,257,45],[1,3476,257,21,"viewable"],[1,3478,257,45,"_ref5"],[1,3480,257,45],[1,3483,258,11,"nextItems"],[1,3485,258,21,"has"],[1,3489,258,25,"key"],[1,3493,259,8,"changed"],[1,3495,259,16,"push"],[1,3500,259,8,"_objectSpread"],[1,3505,259,25,"viewable"],[1,3508,259,35,"isViewable"],[1,3520,259,47],[1,3525,262,8,"changed"],[1,3527,262,16,"length"],[1,3534,262,25],[1,3538,263,6,"this"],[1,3543,263,11,"_viewableItems"],[1,3558,263,28,"nextItems"],[1,3560,264,6,"onViewableItemsChanged"],[1,3563,265,8,"viewableItems"],[1,3577,265,23,"Array"],[1,3583,265,29,"from"],[1,3588,265,34,"nextItems"],[1,3590,265,44,"values"],[1,3600,266,8,"changed"],[1,3608,266,8,"changed"],[1,3610,267,8,"viewabilityConfig"],[1,3628,267,27,"this"],[1,3633,267,32,"_config"],[1,3654,273,0],[1,3663,273,9,"_isViewable"],[1,3665,274,2,"viewAreaMode"],[1,3667,275,2,"viewablePercentThreshold"],[1,3669,276,2,"top"],[1,3671,277,2,"bottom"],[1,3673,278,2,"viewportHeight"],[1,3675,279,2,"itemLength"],[1,3678,281,2],[1,3681,281,6,"_isEntirelyVisible"],[1,3683,281,25,"top"],[1,3685,281,30,"bottom"],[1,3687,281,38,"viewportHeight"],[1,3690,282,4],[1,3697,282,11],[1,3699,284,4],[1,3703,284,10,"pixels"],[1,3705,284,19,"_getPixelsVisible"],[1,3707,284,37,"top"],[1,3709,284,42,"bottom"],[1,3711,284,50,"viewportHeight"],[1,3714,287,4],[1,3721,286,6],[1,3726,286,13,"viewAreaMode"],[1,3728,286,28,"pixels"],[1,3730,286,37,"viewportHeight"],[1,3732,286,54,"pixels"],[1,3734,286,63,"itemLength"],[1,3738,287,22,"viewablePercentThreshold"],[1,3740,291,0],[1,3749,291,9,"_getPixelsVisible"],[1,3751,292,2,"top"],[1,3753,293,2,"bottom"],[1,3755,294,2,"viewportHeight"],[1,3758,296,2],[1,3762,296,8,"visibleHeight"],[1,3764,296,24,"Math"],[1,3769,296,29,"min"],[1,3773,296,33,"bottom"],[1,3775,296,41,"viewportHeight"],[1,3778,296,59,"Math"],[1,3783,296,64,"max"],[1,3787,296,68,"top"],[1,3789,296,73],[1,3792,297,2],[1,3799,297,9,"Math"],[1,3804,297,14,"max"],[1,3808,297,18],[1,3810,297,21,"visibleHeight"],[1,3813,300,0],[1,3822,300,9,"_isEntirelyVisible"],[1,3824,301,2,"top"],[1,3826,302,2,"bottom"],[1,3828,303,2,"viewportHeight"],[1,3831,305,2],[1,3838,305,9,"top"],[1,3841,305,16],[1,3844,305,21,"bottom"],[1,3847,305,31,"viewportHeight"],[1,3850,305,49,"bottom"],[1,3852,305,58,"top"],[1,3854,308,0,"module"],[1,3856,308,7,"exports"],[1,3864,308,17,"ViewabilityHelper"]],"functionMap":{"names":["<global>","ViewabilityHelper","constructor","dispose","computeViewableItems","onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","resetViewableIndices","recordInteraction","_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;ACsE;ECU;GDI;EEK;GFE;EGK;GH4D;EIM;kCC+B,oCD;gCEQ;OFO;GJS;EOK;GPE;EQK;GRE;ESE;2DCM;wCDC;iCEI;OFG;GTsB;CDC;AaE;CbgB;AcE;CdO;AeE;CfM"}},"type":"js/module"}]}