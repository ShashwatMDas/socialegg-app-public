{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/interopRequireWildcard","data":{"isAsync":false}},{"name":"react","data":{"isAsync":false}},{"name":"./NavigationContext","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  var _interopRequireWildcard = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireWildcard\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useFocusEvents;\n\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[2], \"react\"));\n\n  var _NavigationContext = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"./NavigationContext\"));\n\n  function useFocusEvents(_ref) {\n    var state = _ref.state,\n        emitter = _ref.emitter;\n    var navigation = React.useContext(_NavigationContext.default);\n    var lastFocusedKeyRef = React.useRef();\n    var currentFocusedKey = state.routes[state.index].key;\n    React.useEffect(function () {\n      return navigation == null ? void 0 : navigation.addListener('focus', function () {\n        lastFocusedKeyRef.current = currentFocusedKey;\n        emitter.emit({\n          type: 'focus',\n          target: currentFocusedKey\n        });\n      });\n    }, [currentFocusedKey, emitter, navigation]);\n    React.useEffect(function () {\n      return navigation == null ? void 0 : navigation.addListener('blur', function () {\n        lastFocusedKeyRef.current = undefined;\n        emitter.emit({\n          type: 'blur',\n          target: currentFocusedKey\n        });\n      });\n    }, [currentFocusedKey, emitter, navigation]);\n    React.useEffect(function () {\n      var lastFocusedKey = lastFocusedKeyRef.current;\n      lastFocusedKeyRef.current = currentFocusedKey;\n\n      if (lastFocusedKey === undefined && !navigation) {\n        emitter.emit({\n          type: 'focus',\n          target: currentFocusedKey\n        });\n      }\n\n      if (lastFocusedKey === currentFocusedKey || !(navigation ? navigation.isFocused() : true)) {\n        return;\n      }\n\n      if (lastFocusedKey === undefined) {\n        return;\n      }\n\n      emitter.emit({\n        type: 'blur',\n        target: lastFocusedKey\n      });\n      emitter.emit({\n        type: 'focus',\n        target: currentFocusedKey\n      });\n    }, [currentFocusedKey, emitter, navigation]);\n  }\n});","lineCount":68,"map":[[11,0,1,0],[13,0,3,0],[15,0,14,15],[15,11,14,24,"useFocusEvents"],[15,25,14,15],[15,32,14,68],[16,0,14,68],[16,8,14,41,"state"],[16,13,14,68],[16,21,14,41,"state"],[16,26,14,68],[17,0,14,68],[17,8,14,48,"emitter"],[17,15,14,68],[17,23,14,48,"emitter"],[17,30,14,68],[18,0,15,2],[18,8,15,8,"navigation"],[18,18,15,18],[18,21,15,21,"React"],[18,26,15,26],[18,27,15,27,"useContext"],[18,37,15,21],[18,38,15,38,"NavigationContext"],[18,64,15,21],[18,65,15,2],[19,0,16,2],[19,8,16,8,"lastFocusedKeyRef"],[19,25,16,25],[19,28,16,28,"React"],[19,33,16,33],[19,34,16,34,"useRef"],[19,40,16,28],[19,42,16,2],[20,0,18,2],[20,8,18,8,"currentFocusedKey"],[20,25,18,25],[20,28,18,28,"state"],[20,33,18,33],[20,34,18,34,"routes"],[20,40,18,28],[20,41,18,41,"state"],[20,46,18,46],[20,47,18,47,"index"],[20,52,18,28],[20,54,18,54,"key"],[20,57,18,2],[21,0,22,2,"React"],[21,4,22,2,"React"],[21,9,22,7],[21,10,22,8,"useEffect"],[21,19,22,2],[21,20,23,4],[22,0,23,4],[22,13,24,6,"navigation"],[22,23,23,4],[22,43,24,6,"navigation"],[22,53,24,16],[22,54,24,18,"addListener"],[22,65,24,6],[22,66,24,30],[22,73,24,6],[22,75,24,39],[22,87,24,45],[23,0,25,8,"lastFocusedKeyRef"],[23,8,25,8,"lastFocusedKeyRef"],[23,25,25,25],[23,26,25,26,"current"],[23,33,25,8],[23,36,25,36,"currentFocusedKey"],[23,53,25,8],[24,0,26,8,"emitter"],[24,8,26,8,"emitter"],[24,15,26,15],[24,16,26,16,"emit"],[24,20,26,8],[24,21,26,21],[25,0,26,23,"type"],[25,10,26,23,"type"],[25,14,26,27],[25,16,26,29],[25,23,26,21],[26,0,26,38,"target"],[26,10,26,38,"target"],[26,16,26,44],[26,18,26,46,"currentFocusedKey"],[27,0,26,21],[27,9,26,8],[28,0,27,7],[28,7,24,6],[28,8,23,4],[29,0,23,4],[29,5,22,2],[29,7,28,4],[29,8,28,5,"currentFocusedKey"],[29,25,28,4],[29,27,28,24,"emitter"],[29,34,28,4],[29,36,28,33,"navigation"],[29,46,28,4],[29,47,22,2],[30,0,31,2,"React"],[30,4,31,2,"React"],[30,9,31,7],[30,10,31,8,"useEffect"],[30,19,31,2],[30,20,32,4],[31,0,32,4],[31,13,33,6,"navigation"],[31,23,32,4],[31,43,33,6,"navigation"],[31,53,33,16],[31,54,33,18,"addListener"],[31,65,33,6],[31,66,33,30],[31,72,33,6],[31,74,33,38],[31,86,33,44],[32,0,34,8,"lastFocusedKeyRef"],[32,8,34,8,"lastFocusedKeyRef"],[32,25,34,25],[32,26,34,26,"current"],[32,33,34,8],[32,36,34,36,"undefined"],[32,45,34,8],[33,0,35,8,"emitter"],[33,8,35,8,"emitter"],[33,15,35,15],[33,16,35,16,"emit"],[33,20,35,8],[33,21,35,21],[34,0,35,23,"type"],[34,10,35,23,"type"],[34,14,35,27],[34,16,35,29],[34,22,35,21],[35,0,35,37,"target"],[35,10,35,37,"target"],[35,16,35,43],[35,18,35,45,"currentFocusedKey"],[36,0,35,21],[36,9,35,8],[37,0,36,7],[37,7,33,6],[37,8,32,4],[38,0,32,4],[38,5,31,2],[38,7,37,4],[38,8,37,5,"currentFocusedKey"],[38,25,37,4],[38,27,37,24,"emitter"],[38,34,37,4],[38,36,37,33,"navigation"],[38,46,37,4],[38,47,31,2],[39,0,40,2,"React"],[39,4,40,2,"React"],[39,9,40,7],[39,10,40,8,"useEffect"],[39,19,40,2],[39,20,40,18],[39,32,40,24],[40,0,41,4],[40,10,41,10,"lastFocusedKey"],[40,24,41,24],[40,27,41,27,"lastFocusedKeyRef"],[40,44,41,44],[40,45,41,45,"current"],[40,52,41,4],[41,0,43,4,"lastFocusedKeyRef"],[41,6,43,4,"lastFocusedKeyRef"],[41,23,43,21],[41,24,43,22,"current"],[41,31,43,4],[41,34,43,32,"currentFocusedKey"],[41,51,43,4],[43,0,47,4],[43,10,47,8,"lastFocusedKey"],[43,24,47,22],[43,29,47,27,"undefined"],[43,38,47,8],[43,42,47,40],[43,43,47,41,"navigation"],[43,53,47,4],[43,55,47,53],[44,0,48,6,"emitter"],[44,8,48,6,"emitter"],[44,15,48,13],[44,16,48,14,"emit"],[44,20,48,6],[44,21,48,19],[45,0,48,21,"type"],[45,10,48,21,"type"],[45,14,48,25],[45,16,48,27],[45,23,48,19],[46,0,48,36,"target"],[46,10,48,36,"target"],[46,16,48,42],[46,18,48,44,"currentFocusedKey"],[47,0,48,19],[47,9,48,6],[48,0,49,5],[50,0,53,4],[50,10,54,6,"lastFocusedKey"],[50,24,54,20],[50,29,54,25,"currentFocusedKey"],[50,46,54,6],[50,50,55,6],[50,52,55,8,"navigation"],[50,62,55,18],[50,65,55,21,"navigation"],[50,75,55,31],[50,76,55,32,"isFocused"],[50,85,55,21],[50,87,55,18],[50,90,55,46],[50,94,55,6],[50,95,53,4],[50,97,56,6],[51,0,57,6],[52,0,58,5],[54,0,60,4],[54,10,60,8,"lastFocusedKey"],[54,24,60,22],[54,29,60,27,"undefined"],[54,38,60,4],[54,40,60,38],[55,0,62,6],[56,0,63,5],[58,0,65,4,"emitter"],[58,6,65,4,"emitter"],[58,13,65,11],[58,14,65,12,"emit"],[58,18,65,4],[58,19,65,17],[59,0,65,19,"type"],[59,8,65,19,"type"],[59,12,65,23],[59,14,65,25],[59,20,65,17],[60,0,65,33,"target"],[60,8,65,33,"target"],[60,14,65,39],[60,16,65,41,"lastFocusedKey"],[61,0,65,17],[61,7,65,4],[62,0,66,4,"emitter"],[62,6,66,4,"emitter"],[62,13,66,11],[62,14,66,12,"emit"],[62,18,66,4],[62,19,66,17],[63,0,66,19,"type"],[63,8,66,19,"type"],[63,12,66,23],[63,14,66,25],[63,21,66,17],[64,0,66,34,"target"],[64,8,66,34,"target"],[64,14,66,40],[64,16,66,42,"currentFocusedKey"],[65,0,66,17],[65,7,66,4],[66,0,67,3],[66,5,40,2],[66,7,67,5],[66,8,67,6,"currentFocusedKey"],[66,25,67,5],[66,27,67,25,"emitter"],[66,34,67,5],[66,36,67,34,"navigation"],[66,46,67,5],[66,47,40,2],[67,0,68,1]],"functionMap":{"names":["<global>","useFocusEvents","React.useEffect$argument_0","<anonymous>"],"mappings":"AAA;eCa;ICS;uCCC;ODG,CD;ICK;sCCC;ODG,CD;kBCI;GD2B;CDC"}},"type":"js/module"}]}